\RequirePackage[framemethod=TikZ]{mdframed}
\usetikzlibrary{shadows}
\usepackage{graphicx}
\usepackage{minted}
\usepackage{color}
\usepackage{textcomp}

% Insertion du sommaire de chaque section beamer
\AtBeginSection[]
{
	\begin{frame}<beamer>{Sommaire}
	\tableofcontents[currentsection,sectionstyle=show/shaded]
	\end{frame}
}

\mode<presentation>

% Style
\useinnertheme[shadow=true]{rounded}
\useoutertheme{infolines}
\usecolortheme{orchid}
\usecolortheme{whale}

\beamertemplatenavigationsymbolsempty
\setbeamercolor{structure}{fg=teal, bg=teal!40}

% Format de la page de titres
\defbeamertemplate*{title page}{customized}[1][colsep=-4bp,rounded=true,shadow=true]
{
	\vbox{}
	\vfill
	\begingroup
	\centering
	\begin{beamercolorbox}[sep=8pt,center,#1]{title}
		\usebeamerfont{title}\inserttitle\par%
		\ifx\insertsubtitle\@empty%
		\else%
		\vskip0.25em%
		{\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
		\fi%     
	\end{beamercolorbox}%
	\vskip1em\par
	\begin{beamercolorbox}[sep=8pt,center,#1]{author}
		\usebeamerfont{author}\insertauthor
	\end{beamercolorbox}
	\begin{beamercolorbox}[sep=8pt,center,#1]{institute}
		\usebeamerfont{institute}\insertinstitute
	\end{beamercolorbox}
	\begin{beamercolorbox}[sep=8pt,center,#1]{date}
		\usebeamerfont{date}\insertdate
	\end{beamercolorbox}\vskip0.5em
	{\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
	\endgroup
	\vskip 10mm plus 10fill
	\hfill\includegraphics[height=12pt]{license.png}
}

% Format des blocs (block, alertblock et exampleblock)
%% Coloration
\definecolor{example_green}{RGB}{0,0.6,0}
\setbeamercolor{block title}{bg=teal,fg=white}
\setbeamercolor{block title example}{bg=green!60!black,fg=white}

%% Pas de degrade sur la coloration des blocs (block, alertblock et exampleblock)
\pgfdeclareverticalshading[lower.bg,upper.bg]{bmb@transition}{200cm}{%
	color(0pt)=(lower.bg); color(2pt)=(lower.bg); color(4pt)=(lower.bg)}

%% Taille et ombrage identique au block de code
\setbeamertemplate{blocks}[rounded][shadow=false]
\mdfdefinestyle{blockframe}{
	backgroundcolor=white,
	linewidth=0pt,
	linecolor=white,
	roundcorner=5pt,
	shadow=true,
	shadowsize=5pt,
	innerleftmargin=4pt,
	innerrightmargin=4pt,
	innertopmargin=-7pt,
	innerbottommargin=1pt
}
\surroundwithmdframed[style=blockframe]{block}
\surroundwithmdframed[style=blockframe]{alertblock}
\surroundwithmdframed[style=blockframe]{exampleblock}

% Format de la bibliographie
\setbeamertemplate{frametitle continuation}[from second]
\setbeamercolor*{bibliography entry title}{fg=black}
\setbeamercolor*{bibliography entry author}{fg=teal}
\setbeamercolor*{bibliography entry location}{fg=teal}
\setbeamercolor*{bibliography entry note}{fg=teal}
\setbeamertemplate{bibliography item}{\insertbiblabel}

% Ajoute une page note mÃªme vide
\makeatletter 
\def\beamer@framenotesbegin{%   
	\gdef\beamer@noteitems{}%   
	\gdef\beamer@notes{{}}%  
}
\makeatother

\mode
<all>

% Format de code
%% Gestion des listing
\mdfdefinestyle{codeframe}{
	backgroundcolor=white,
	linecolor=black,
	roundcorner=5pt,
	shadow=true,
	shadowsize=5pt
}

\surroundwithmdframed[style=codeframe]{minted}
\setminted{fontsize=\small,baselinestretch=1,autogobble}
