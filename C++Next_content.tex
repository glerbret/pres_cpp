\documentclass[C++.tex]{subfiles}
\begin{document}

\section{Et ensuite ?}
\subsection*{Présentation}
\begin{frame}[fragile]
	\frametitle{Présentation}
	\begin{itemize}
		\item C++23 ne marque pas la fin des évolutions du C++
		\item Plusieurs sujets proposés et non pris en compte dans les versions actuelles
		\item Plusieurs TS publiés et non intégrés ou en cours d'étude
	\end{itemize}
\end{frame}

\subsection*{TS}
\begin{frame}[fragile]
	\frametitle{TS -- Networking TS}
	\begin{itemize}
		\item Publié en avril 2018
		\item Partiellement basé sur \mintinline{cpp}|Boost.Asio|
		\item Gestion de \textit{timer}
		\item Gestion de tampon et de flux orientés tampon
		\item Gestion de \textit{sockets} et de flux \textit{socket}
		\item Gestion IPv4, IPv6, TCP, UDP
		\item Manipulation d'adresses IP
		\item Pas de protocoles de plus haut niveau actuellement
		\item Demande post-TS : gestion de la sécurité (a priori pas possible)
		\item Modèle asynchrone, différent de celui déjà présent en C++
	\end{itemize}

	\addproposal{n4771}{https://wg21.link/n4771}
	\addproposal{P2762}{https://wg21.link/P2762R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Pattern matching}
	\begin{itemize}
		\item Utilisation du mot clé \mintinline{cpp}|inspect| (ou \mintinline{cpp}|switch|) et du \textit{wildcard} \mintinline{cpp}|__| (ou \mintinline{cpp}|_|)
		\item Utilisable sur
		\begin{itemize}
			\item Entiers
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		inspect(x) {
		  0  => { cout << "Aucun"; }
		  1  => { cout << "Un"; }
		  __ => { cout << "Plusieurs"; }
		};
	\end{minted}

	\begin{itemize}
		\item[]
		\begin{itemize}
			\item Chaînes de caractères
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		inspect(x) {
		  "zero" => { cout << "Aucun"; }
		  "un"   => { cout << "Un"; }
		  __     => { cout << "Plusieurs"; }
		};
	\end{minted}

	\begin{codesample}
		\sample{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:1,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%23include+%3Cstring%3E%0A%0Aint+main()%0A%7B%0A++std::string+x+%3D+%22un%22%3B%0A%0A++inspect(x)%0A++%7B%0A++++%22zero%22+%3D%3E+%7B+std::cout+%3C%3C+%22Aucun%22%3B+%7D%0A++++%22un%22+++%3D%3E+%7B+std::cout+%3C%3C+%22Un%22%3B+%7D%0A++++__+++++%3D%3E+%7B+std::cout+%3C%3C+%22Plusieurs%22%3B+%7D%0A++%7D%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:clang_patmat,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+clang+(experimental+pattern+matching)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}

		\sample{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:1,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%0Aint+main()%0A%7B%0A++int+x+%3D+1%3B%0A++inspect(x)%0A++%7B%0A++++0+++%3D%3E+%7B+std::cout+%3C%3C+%22Aucun%22%3B+%7D%0A++++1+++%3D%3E+%7B+std::cout+%3C%3C+%22Un%22%3B+%7D%0A++++__++%3D%3E+%7B+std::cout+%3C%3C+%22Plusieurs%22%3B+%7D%0A++%7D%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:clang_patmat,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+clang+(experimental+pattern+matching)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}
	\end{codesample}

	\addproposal{P1371}{https://wg21.link/p1371r3}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Pattern matching}
	\begin{itemize}
		\item[]
		\begin{itemize}
			\item \mintinline{cpp}|std::tuple|, \mintinline{cpp}|std::pair|, \mintinline{cpp}|std::array| et tuple-like
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		inspect(p) {
		  [0, 0] => { cout << "on origin"; }
		  [0, y] => { cout << "on y-axis"; }
		  [x, 0] => { cout << "on x-axis"; }
		  [x, y] => { cout << x << ',' << y; }
		};
	\end{minted}

	\begin{itemize}
		\item []
		\begin{itemize}
			\item \mintinline{cpp}|std::variant|, \mintinline{cpp}|std::any| et \mintinline{cpp}|std::expected|
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		inspect(v) {
		  <int> i   => { cout << "Entier " << i; }
		  <float> f => { cout << "Reel " << f; }
		};
	\end{minted}

	\begin{codesample}
		\sample{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:1,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%23include+%3Ctuple%3E%0A%0Aint+main()%0A%7B%0A++std::tuple%3Cint,+int%3E+p%7B2,+0%7D%3B%0A++inspect(p)%0A++%7B%0A++++%5B0,+0%5D+%3D%3E+%7B+std::cout+%3C%3C+%22on+origin%22%3B+%7D%0A++++%5B0,+y%5D+%3D%3E+%7B+std::cout+%3C%3C+%22on+y-axis%22%3B+%7D%0A++++%5Bx,+0%5D+%3D%3E+%7B+std::cout+%3C%3C+%22on+x-axis%22%3B+%7D%0A++++%5Bx,+y%5D+%3D%3E+%7B+std::cout+%3C%3C+x+%3C%3C+!',!'+%3C%3C+y%3B+%7D%0A++%7D%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:clang_patmat,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-Wall+-Wextra+-pedantic+-Wno-unused-variable',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+clang+(experimental+pattern+matching)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}
	\end{codesample}

	\addproposal{P1371}{https://wg21.link/p1371r3}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Pattern matching}
	\begin{itemize}
		\item[]
		\begin{itemize}
			\item Types polymorphiques
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		inspect(shape) {
		  <Circle> [r]       => { cout << 3.14 * r * r; }
		  <Rectangle> [w, h] => { cout << w * h; }
		};
	\end{minted}

	\begin{itemize}
		\item Support des gardes
	\end{itemize}

	\begin{minted}{cpp}
		inspect(p) {
		  [x, y] if(x > y) => { cout << x << "superieur a" << y; }
		};
	\end{minted}

	\begin{alertblock}{Attention}
		Prise en compte de la première correspondance et non de la meilleure
	\end{alertblock}

	\addproposal{P1371}{https://wg21.link/p1371r3}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Library fundamentals 2}
	\begin{itemize}
		\item Partiellement intégré en C++17 et C++20
		\item \mintinline{cpp}|std::is_detected| indique si un \textit{template-id} est bien formé
		\item Wrapper \mintinline{cpp}|std::propagate_const| pour les pointeurs et \textit{pointer-like}
		\item Pointeurs intelligents non possédants \mintinline{cpp}|std::observer_ptr|
		\item \mintinline{cpp}|std::ostream_joiner| écrit des éléments dans un flux de sortie
	\end{itemize}

	\begin{minted}{cpp}
		int foo[] = {1, 2, 3, 4, 5};
		copy(begin(i), end(i), make_ostream_joiner(cout, ", "));
		// "1, 2, 3, 4, 5"
	\end{minted}

	\begin{itemize}
		\item Générateur aléatoire propre au thread \mintinline{cpp}|std::default_random_engine| initialisé dans un état non prédictif
		\begin{itemize}
			\item \mintinline{cpp}|std::randint()| génère un nombre entier dans une plage spécifiée
			\item \mintinline{cpp}|std::reseed()| modifie la graine de génération
			\item \mintinline{cpp}|std::sample()| choisit aléatoirement $n$ élément d'une séquence
			\item \mintinline{cpp}|std::shuffle()| réordonne aléatoirement les éléments d'un range
		\end{itemize}
	\end{itemize}

	\addproposal{N4617}{https://wg21.link/n4617}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Library fundamentals 3}
	\begin{itemize}
		\item \textit{Scope Guard} : enregistrement d'un foncteur appelé
		\begin{itemize}
			\item appelé à la sortie du scope : \mintinline{cpp}|std::scope_exit|
			\item appelé à la sortie du scope par une exception : \mintinline{cpp}|std::scope_fail|
			\item appelé à la sortie du scope hors exception : \mintinline{cpp}|std::scope_success|
		\end{itemize}
		\item \textit{RAII wrapper} \mintinline{cpp}|std::unique_resource|
	\end{itemize}

	\addproposal{N4948}{https://wg21.link/n4948}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Parallelism 2}
	\begin{itemize}
		\item Exception levée durant une exécution parallèle
		\item Politique d'exécution \mintinline{cpp}|vector_policy|
	\end{itemize}

	\addproposal{N4808}{https://wg21.link/n4808}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Concurrency}
	\begin{itemize}
		\item Partiellement intégré à C++20, C++23 et C++26
		\item Versions de \mintinline{cpp}|std::future| et \mintinline{cpp}|std::shared_future| supportant les continuations
		\begin{itemize}
			\item \mintinline{cpp}|is_ready()| indique si l'état partagé est disponible
			\item \mintinline{cpp}|then()| attache une continuation à la future
		\end{itemize}
		\item \mintinline{cpp}|std::when_any| crée une future disponible lorsqu'une des futures contenues devient disponible
		\item \mintinline{cpp}|std::when_all| crée une future disponible lorsque toutes les futures contenues sont disponibles
		\item \mintinline{cpp}|std::make_ready_future()| crée une future contenant une valeur immédiatement disponible
		\item \mintinline{cpp}|std::make_exceptional_future()| crée une future contenant une exception immédiatement disponible
	\end{itemize}

	\addproposal{P0159}{https://wg21.link/p0159r0}
	\addproposal{N4953}{https://wg21.link/n4953}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Transactional Memory}
	\begin{itemize}
		\item Blocs synchronisés
		\item Blocs atomiques
		\item Fonction \textit{transaction-safe}
		\item Attributs \mintinline{cpp}|[[optimize_for_synchronized]]|
	\end{itemize}

	\addproposal{N4514}{https://wg21.link/n4514}
	\addproposal{N4956}{https://wg21.link/n4956}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Reflection}
	\begin{itemize}
		\item Probablement intégré à C++26 (design validé, wording en cours de revue)
		\item Réflexion statique uniquement
		\item Introspection
		\item Méta-programmation et code \textit{compile-time}
		\item Injection
		\item Méta-classes
		\begin{itemize}
			\item Construction de types de classes (dont les classes elles-mêmes) ayant
			\begin{itemize}
				\item Des contraintes
				\item Des comportements par défaut
				\item Des opérations par défaut
			\end{itemize}
			\item \mintinline{cpp}|class|, \mintinline{cpp}|struct|, \mintinline{cpp}|enum class|, \textit{interface}, \textit{value type}
		\end{itemize}
		\item Bindings vers d'autres langages (JS, Python) via ces mécanismes
	\end{itemize}

	\addproposal{N4856}{https://wg21.link/n4856}
	\addproposal{P1240}{https://wg21.link/p1240r2}
	\addproposal{p2996}{https://wg21.link/p2996r3}
	\addproposal{p3294}{https://wg21.link/p3294r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{TS -- Reflection}
	\begin{minted}{cpp}
		enum Color { red, green, blue };

		template <typename E> requires is_enum_v<E>
		constexpr string enum_to_string(E value) {
		  template for(constexpr auto e : meta::members_of(^E)) {
		    if(value == [:e:]) {
		      return string(meta::name_of(e));
		    }
		  }
		  return "<unnamed>";
		}

		enum_to_string(Color::red);  // red
		enum_to_string(Color(42));   // <unnamed>
	\end{minted}

	\addproposal{N4856}{https://wg21.link/n4856}
	\addproposal{P1240}{https://wg21.link/p1240r2}
\end{frame}

\subsection*{Dépréciation et suppression}
\begin{frame}[fragile]
	\frametitle{Dépréciation}
	\begin{itemize}
		\item Dépréciation des modes d'arrondi (\mintinline{cpp}|fesetround()|)
		\item Dépréciation des types de caractère signés dans \mintinline{cpp}|iostream|
		\item Dépréciation de la notion \mintinline{cpp}|trivial|
		\item Dépréciation des conversions implicites entre \mintinline{cpp}|char8_t|, \mintinline{cpp}|char16_t| et \mintinline{cpp}|char32_t|
	\end{itemize}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Suppression}
	\begin{itemize}
		\item Suppression d'éléments précédemment dépréciés
		\begin{itemize}
			\item Comparaison de tableau C (se fait sur les adresses)
			\item \mintinline{cpp}|volatile|
			\item \mintinline{cpp}|std::allocator|
			\item \mintinline{cpp}|std::basic_string::reserve()| sans argument
			\item \textit{Unicode Conversion Facets}
			\item \textit{Locale Category Facets for Unicode}
		\end{itemize}
	\end{itemize}
\end{frame}

\subsection*{Contract}
\begin{frame}[fragile]
	\frametitle{Contracts}
	\begin{itemize}
		\item Contrats sur les fonctions virtuelles
		\item Contrats sur les pointeurs de fonction, sur les pointeurs de fonction membre et leurs alias
		\item Accès à la valeur initiale des paramètres ou autres entités lors de la vérification des postconditions
		\item Comportement \og{}assume\fg{} : compilateur peut optimiser en supposant qu'un contrat non vérifié est vrai
		\item Choix du comportement dans l'assertion du contrat
		\item Postcondition sur les sorties non normales d'une fonction (exception)
		\item Contrat non évaluable au run-time
		\item Sauvegarde d'état pour la vérification de contrat
		\item Invariants
	\end{itemize}
\end{frame}

\subsection*{Comportement}
\begin{frame}[fragile]
	\frametitle{Erroneous behavior}
	\begin{itemize}
		\item Applicable à l'absence de retour des fonctions d'affectations
		\item \mintinline{cpp}|std::erroneous()| provoque un comportement erroné
	\end{itemize}

	\addproposal{p2973}{https://wg21.link/p2973r0}
	\addproposal{p3232}{https://wg21.link/p3232r0}
\end{frame}

\subsection*{Syntaxe}
\begin{frame}[fragile]
	\frametitle{Vérification statique}
	\begin{itemize}
		\item \textit{Procedural function interfaces}
		\begin{itemize}
			\item Annotations de types \textit{claim} / \textit{assertion}
			\item Recouvre des points du contract TS mais plus ambitieux
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Mots-clés}
	\begin{itemize}
		\item Conversion de macros en mots-clés
		\begin{itemize}
			\item \mintinline{cpp}|assert|
			\item \mintinline{cpp}|offsetof|
		\end{itemize}
		\item Réservation des identifiants commençant par \mintinline[escapeinside=||]{cpp}{|@|} aux annotations
	\end{itemize}

	\addproposal{p3254}{https://wg21.link/p3254r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|using|}
	\begin{itemize}
		\item Accolades pour grouper les déclarations  \mintinline{cpp}|using|
	\end{itemize}

	\begin{minted}{cpp}
		using std::chrono::{duration, time_point, duration_cast};
	\end{minted}

	\addproposal{p3485}{https://wg21.link/p3485r0}
\end{frame}


\subsection*{Encodage}
\begin{frame}[fragile]
	\frametitle{Encodage}
	\begin{itemize}
		\item Ajout des algorithmes Unicode

\note[item]{Algorithmes défini par Unicode pour travailler sur les séquences de code points}

		\item Support d'Unicode (UTF-8, UTF-16 et UTF-32) dans la bibliothèque standard
	\end{itemize}
\end{frame}

\subsection*{Ligne de commande}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::arguments|}
	\begin{itemize}
		\item Manipulation des arguments du programme
		\item Arguments accessibles dans tous le programme, pas uniquement \mintinline{cpp}|main()|
		\item Gestion de l'encodage
	\end{itemize}

	\addproposal{p3474}{https://wg21.link/p3474r0}
\end{frame}

\subsection*{Littéraux}
\begin{frame}[fragile]
	\frametitle{Littéraux}
	\begin{itemize}
		\item \textit{f-literal}
		\begin{itemize}
			\item Chaînes littérales contenant des \textit{placeholders}
			\item Similaires au \textit{f-string} Python
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		int a = 5;
		auto b = f"Value : {a}";
	\end{minted}

	\begin{itemize}
		\item Utilisation du préfixe \mintinline{cpp}|0o| pour les nombres octaux (dépréciation de \mintinline{cpp}|0|)
	\end{itemize}

	\addproposal{p3412}{https://wg21.link/p3412r0}
	\addproposal{P0085}{https://wg21.link/P0085R0}
\end{frame}

\subsection*{Types}
\begin{frame}[fragile]
	\frametitle{Types}
	\begin{itemize}
		\item Relâchement des restrictions sur les \mintinline{cpp}|typedef _t|
		\item Mécanismes \textit{compile-time} vérifiant que deux types ont la même représentation mémoire
		\item Type \og{}\textit{fixed point decimal}\fg{}
		\item Entiers larges \mintinline{cpp}|wide_integer<128, unsigned>|
		\item \mintinline{cpp}|std::int_least128_t|
		\item Nombres rationnels
		\item Possibilité de définir des objets \mintinline{cpp}|constexpr|
		\item \textit{Zero-initialisation} des objets \textit{automatic storage duration}
		\item Entiers non signés pour lesquels l'\textit{overflow} est un UB
		\item Rendre les \mintinline{cpp}|std::initializer_list| déplaçables
		\item Détection et gestion des débordements
		\item Gestion des arrondis
	\end{itemize}

	\addproposal{P3003}{https://wg21.link/P3003R0}
	\addproposal{P3018}{https://wg21.link/P3018R0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p3140}{https://wg21.link/p3140r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Types}
	\begin{itemize}
		\item Rendre obligatoire le support de \mintinline{cpp}|intptr_t| et \mintinline{cpp}|uintptr_t|
		\item Types flottants compatible ISO/IEC 60559:2020 (résultats davantage reproductibles)
		\item \mintinline{cpp}|CHAR_BIT| impérativement égal à 8 (\textit{\og{}There are exactly 8 bits in a byte\fg{}})

\note[item]{Auparavant obligatoirement supérieur ou égal à 8, contraint par les plages garanties de \mintinline{cpp}|signed char| et \mintinline{cpp}|unsigned char|, mais pas d'autres contraintes (même pas multiple de 8)}

		\item Entiers de $n$ bits similaires à \mintinline{cpp}|_BitInt| du C
		\item \mintinline{cpp}|std::to_signed| et \mintinline{cpp}|std::to_unsigned| permet d'obtenir le type signé/non signé correspondant au type initial
		\item Amélioration des nombres flottants
	\end{itemize}

	\addproposal{p3248}{https://wg21.link/p3248r0}
	\addproposal{p3375}{https://wg21.link/p3375r0}
	\addproposal{p3477}{https://wg21.link/p3477r0}
	\addproposal{p3635}{https://wg21.link/p3635r0}
	\addproposal{p3639}{https://wg21.link/p3639r0}
	\addproposal{p3643}{https://wg21.link/p3643r0}
	\addproposal{P3715}{https://wg21.link/P3715R0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Support des unités physiques}
	\begin{itemize}
		\item Gestion des quantités et dimensions
		\item Supports des unités de base, dérivées, multiples et sous-multiples
		\item Conversions et opérations entre unités
	\end{itemize}

	\begin{minted}{cpp}
		static_assert(10km / 2 == 5km);

		static_assert(1h == 3600s);
		static_assert(1km + 1m == 1001m);

		static_assert(1km / 1s == 1000mps);
		static_assert(2kmph * 2h == 4km);
		static_assert(2km / 2kmph == 1h);

		static_assert(1000 / 1s == 1kHz);

		static_assert(10km / 5km == 2);
	\end{minted}

	\addproposal{p1935}{https://wg21.link/p1935r2}
	\addproposal{P2980}{https://wg21.link/P2980R0}
	\addproposal{P2981}{https://wg21.link/P2981R0}
	\addproposal{P2982}{https://wg21.link/P2982R0}
	\addproposal{p3045}{https://wg21.link/p3045r5}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Représentation mémoire}
	\begin{itemize}
		\item Accès aux octets sous-jacents d'un objet
		\begin{itemize}
			\item Nouvelle catégorie d'objet \textit{contiguous-layout}
			\begin{itemize}
				\item Uniquement des types scalaires et des classes sans fonction ni base virtuelle
				\item N'hérite pas d'objet non \textit{contiguous-layout}
				\item Contiguïté garantie
			\end{itemize}
			\item Représentation sous forme de tableau
			\item Obtention d'un pointeur sur la représentation via \mintinline{cpp}|reinterpret_cast| vers \mintinline{cpp}|char*|, \mintinline{cpp}|unsigned char*| ou \mintinline{cpp}|std::byte*|
			\item Conversion pointeur sur représentation vers pointeur sur objet via \mintinline{cpp}|reinterpret_cast|
		\end{itemize}
	\end{itemize}
\end{frame}

\subsection*{Variables}
\begin{frame}[fragile]
	\frametitle{Shadowing}
	\begin{itemize}
		\item Levée de plusieurs restrictions
		\begin{itemize}
			\item Masquage avec un type \mintinline{cpp}|void| pour empêcher l'utilisation de la variable masquée
			\item Initialisation de la nouvelle variable avec l'ancienne variable de même nom
			\item Masquage sans création d'une nouvelle portée
			\item Conversion conditionnelle
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		auto foo = optional<string>{"Foo"};
		if(foo as string) { /* foo: string& */ }
		else { /* foo: optional<string> */ }
	\end{minted}

	\begin{itemize}
		\item []
		\begin{itemize}
			\item Constification d'un conteneur dans un \textit{range-based for loop}
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		vector<string> foo{"1", "2", "3"};
		cfor(auto &bar : foo) { /* foo est constant */ }
	\end{minted}

	\addproposal{P2951}{https://wg21.link/P2951R3}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::ignore|}
	\begin{itemize}
		\item \mintinline{cpp}|std::ignore| pour ignorer une valeur de retour
	\end{itemize}

	\begin{minted}{cpp}
		ignore = printf("Hello\n");
	\end{minted}

	\addproposal{P2968}{https://wg21.link/P2968R0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|__COUNTER__|}
	\begin{itemize}
		\item Normalisation de la macro \mintinline{cpp}|__COUNTER__|
		\item Incrémentée à chaque invocation
	\end{itemize}

	\begin{minted}{cpp}
		cout << __COUNTER__ << "\n";	// 0
		cout << __COUNTER__ << "\n";	// 1
		cout << __COUNTER__ << "\n";	// 2
	\end{minted}

	\addproposal{P3384}{https://wg21.link/p3384r0}

	\begin{codesample}
		\sample{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:9,positionColumn:1,positionLineNumber:9,selectionStartColumn:1,selectionStartLineNumber:9,startColumn:1,startLineNumber:9),source:'%23include+%3Ciostream%3E%0A%0Aint+main()%0A%7B%0A++std::cout+%3C%3C+__COUNTER__+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+__COUNTER__+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+__COUNTER__+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B26+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}
	\end{codesample}
\end{frame}


\subsection*{Contrôle de flux}
\begin{frame}[fragile]
	\frametitle{Contrôle de flux}
	\begin{itemize}
		\item Ajout d'une instruction à \mintinline{cpp}|break| appelé lors de la sortie de la boucle

\note[item]{Alignement sur des évolutions C en cours}

		\item Ajout d'une boucle \mintinline{cpp}|do_until|
		\item Version \textit{generator-based} de \textit{for loop}
	\end{itemize}

	\begin{minted}{cpp}
		struct generator { ... }

		for(int i: generator())
		{ ... }
	\end{minted}

	\begin{itemize}
		\item \mintinline{cpp}|break label| et \mintinline{cpp}|continue label| appliqués à une boucle englobante
	\end{itemize}

	\begin{minted}{cpp}
		outer: for(...) {
		  for(...) {
		    if (...) {
		      break outer; } } }
	\end{minted}

	\addproposal{P2881}{https://wg21.link/p2881r0}
	\addproposal{p3568}{https://wg21.link/p3568r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Contrôle de flux}
	\begin{itemize}
		\item Ajout d'une expression au \textit{range-based for loop} évalué à chaque fin d'itération
	\end{itemize}

	\begin{minted}{cpp}
		for(int i = 0; auto x : e; ++i) { ... }
	\end{minted}

	\addproposal{p3667}{https://wg21.link/p3667r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{do expression}
	\begin{itemize}
		\item Ajout des \og{}\textit{do expression}\fg{} : instructions traités comme une expression
	\end{itemize}

	\begin{minted}{cpp}
		int x = do { do return 42; };
	\end{minted}

	\begin{itemize}
		\item[]
		\begin{itemize}
			\item Améliorations et simplifications des coroutines, du \textit{pattern matching}, \ldots{}
			\item Introduit un nouveau scope mais pas de nouveau \textit{function scope}
			\item \mintinline{cpp}|do return| pour retourner une valeur dans un \textit{do expression}
			\item Possibilité d'expliciter le type de retour
		\end{itemize}
	\end{itemize}

	\addproposal{P2806}{https://wg21.link/p2806r1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|static_assert|}
	\begin{itemize}
		\item Retarder à l'instanciation l'échec de \mintinline{cpp}|static_assert(false)| dans des templates
	\end{itemize}

	\begin{minted}{cpp}
		// C++20 : echec de compilation systematique
		template<typenameT>int my_func(constT&) {
		  if constexpr(is_integral_v<T>) { return 1; }
		  else if constexpr(is_convertible_v<string, T>) { return 2 ; }
		  else { static_assert(false); }
		}
	\end{minted}

	\addproposal{P2593}{https://wg21.link/p2593r1}
\end{frame}

\subsection*{Fonctions}
\begin{frame}[fragile]
	\frametitle{Évolutions des fonctions}
	\begin{itemize}
		\item \textit{Unified Call Syntax}
		\begin{itemize}
			\item \mintinline{cpp}|x.f(...)| tente d'appeler \mintinline{cpp}|f(x, ...)| si \mintinline{cpp}|x.f(...)| n'est pas valide
			\item \mintinline{cpp}|p->f(...)| tente d'appeler \mintinline{cpp}|f(p, ...)| si \mintinline{cpp}|p->f(...)| n'est pas valide
			\item Si \mintinline{cpp}|f(x, ...)| n'est pas valide, \mintinline{cpp}|f(x, ...)| tente d'appeler
			\begin{itemize}
				\item \mintinline{cpp}|x->f(...)| si \mintinline{cpp}|operator->| existe pour \mintinline{cpp}|x|
				\item \mintinline{cpp}|x.f(...)| sinon
			\end{itemize}
			\item Généralisation de \mintinline{cpp}|std::begin()| et co. dans le langage
		\end{itemize}
		\item Possibilité pour les fonctions \mintinline{cpp}|va_start| de ne prendre aucun argument
		\item Élision de copie des objets de retour nommés (NRVO) garantie

\note[item]{NRVO : \textit{Named Return Value Optimization}}
\note[item]{RVO déjà garantie en C++17 pour des \textit{prvalues}}
\note[item]{Optimisation déjà réalisée par certains compilateurs}

		\item Paramètres \mintinline{cpp}|constexpr| et \og{}\textit{maybe} \mintinline{cpp}|constexpr|\fg{}
		\item Fonctions \textit{heap-free}
		\item Retour \mintinline{cpp}|std::move(x)| éligible au NRVO si \mintinline{cpp}|x| l'est
	\end{itemize}

	\addproposal{P3021}{https://wg21.link/p3021r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p1045}{https://wg21.link/p1045r1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Évolutions des fonctions}
	\begin{itemize}
		\item Possibilité de déterminer l'appelant
		\item Arguments nommés
	\end{itemize}

	\begin{minted}{cpp}
		void foo(int a, int b, int c, int d, bool e = false);

		foo(b: 10, a: 100, c: 640, d: 480);
		foo(100, 10, d: 480, e: false, c: 640);
	\end{minted}

	\begin{itemize}
		\item Fourniture d'un paramètre à \mintinline{cpp}|inline|
		\begin{itemize}
			\item \mintinline{cpp}|std::noinline| : désactivation de l'inlining
			\item \mintinline{cpp}|std::normal_inline| : comportement actuel, incitation (équivalent à \mintinline{cpp}|inline| sans paramètre)
			\item \mintinline{cpp}|std::always_inline| : force l'inlining
		\end{itemize}
	\end{itemize}

	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p3676}{https://wg21.link/p3676r0}
\end{frame}

\subsection*{Opérateurs}
\begin{frame}[fragile]
	\frametitle{Opérateurs}
	\begin{itemize}
		\item Surcharge de \mintinline{cpp}|operator.|
		\begin{itemize}
			\item Si l'opérateur est défini, les opérations sont transférés à son résultat
			\item \ldots{} sauf celles définies comme fonctions membres
			\item Réalisation de \textit{smart reference} (p.ex. \textit{proxy})
		\end{itemize}
		\item Surcharge de \mintinline{cpp}|operator?:|
		\item \mintinline{cpp}|operator??| pour tester \mintinline{cpp}|std::expected|
		\item Évolutions des opérateurs de comparaison et de \mintinline{cpp}|operator<=>|
		\begin{itemize}
			\item Dépréciation des conversions entre énumération et flottant
			\item Dépréciation des conversions entre énumérations
			\item Dépréciation de la comparaison \og \textit{two-way}\fg{} entre types tableaux
			\item Comparaison \textit{three-way} entre \textit{unscoped} énumération et type entier
		\end{itemize}
		\item Interdiction de l'appel de \mintinline{cpp}|operator=| sur des temporaires

\note[item]{Interdit sur les types \textit{built-in} mais possible sur les autres, avec tous les problèmes que ça peut poser}

		\item Possibilité d'utiliser \mintinline{cpp}|auto| ou \mintinline{cpp}|auto&| comme retour d'opérateur \mintinline{cpp}|=default|
	\end{itemize}

	\addproposal{P2561}{https://wg21.link/p2561r2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Opérateurs}
	\begin{itemize}
		\item Génération d'opérateurs à la demande via \mintinline{cpp}|=default|
		\begin{itemize}
			\item \mintinline{cpp}|operatorX=| à partir de \mintinline{cpp}|operatorX|
			\item incrément et décrément préfixés à partir de l'addition et de la soustraction
			\item incrément et décrément suffixés à partir des versions préfixés
			\item \mintinline{cpp}|operator->| et \mintinline{cpp}|operator->*| à partir de \mintinline{cpp}|operator*| et \mintinline{cpp}|operator.|

\note[item]{A priori, \mintinline{cpp}|operator->| et \mintinline{cpp}|operator->*| générés par défaut, génération désactivable avec \mintinline{cpp}|=delete|}

		\end{itemize}
		\item Ajout de \mintinline{cpp}|operator[]| à \mintinline{cpp}|std::initializer_list|
		\item Opérateur pipeline \mintinline{cpp}!operator|>!
	\end{itemize}

	\begin{minted}{cpp}
		x|>f(y);

		// Equivalent a

		f(x, y);
	\end{minted}

	\addproposal{p3668}{https://wg21.link/P3668R1}
	\addproposal{P2952}{https://wg21.link/p2952r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Opérateurs}
	\begin{itemize}
		\item \mintinline{cpp}|operator template()| : extension du support des \textit{non-type template parameters}
		\item Opérateur d'implication \mintinline{cpp}|operator=>()|
	\end{itemize}

	\begin{minted}{cpp}
		p => q;

		// Equivalent a

		!p || q;
	\end{minted}

	\begin{itemize}
		\item Opérateur \mintinline{cpp}|nameof|
		\item Amélioration de la syntaxe pour les surcharges de \mintinline{cpp}|++| et \mintinline{cpp}|--| (\mintinline{cpp}|prefix| / \mintinline{cpp}|postfix|)
	\end{itemize}

	\addproposal{P2971}{https://wg21.link/p2971r1}
	\addproposal{p2966}{https://wg21.link/p2966r1}
\end{frame}

\subsection*{Structured binding}
\begin{frame}[fragile]
	\frametitle{Structured binding}
	\begin{itemize}
		\item Support du \textit{structured binding} sur \mintinline{cpp}|std::extents|
	\end{itemize}

	\addproposal{P2906}{https://wg21.link/p2906r0}
\end{frame}

\subsection*{Classes}
\begin{frame}[fragile]
	\frametitle{Classes}
	\begin{itemize}
		\item Qualificateurs autorisés sur les constructeurs
		\begin{itemize}
			\item Constructeurs \mintinline{cpp}|const| pour construire systématiquement des objets constants
			\item Constructeurs non \mintinline{cpp}|const| peuvent construire des objets constants ou non
		\end{itemize}
		\item Déduction template dans les constructeurs d'agrégats et les alias
		\item \textit{Layout} des classes
		\begin{itemize}
			\item Contrôle du \textit{layout} pour privilégier taille, ordre de déclaration, visibilité, vitesse, ordre alphabétique, lignes de cache ou règles d'une version antérieure du C++ ou d'un autre langage
			\item Contrôle de l'alignement (remplaçant de \mintinline{cpp}|#pragma pack(N)|)
		\end{itemize}
		\item Constructeurs par déplacement \mintinline{cpp}|=bitcopies|
		\item Extension de \mintinline{cpp}|=delete| à d'autres construction (variables template)
		\item Classes de base \mintinline{cpp}|std::noncopyable| et \mintinline{cpp}|std::nonmovable|
		\item Mécanisme de conversion tableau de structures vers structure de tableaux

\note[item]{AoS plus lisible et facile à maintenir mais SoA souvent plus efficace}
	\end{itemize}

	\addproposal{P2763}{https://wg21.link/p2763r1}
	\addproposal{P2895}{https://wg21.link/p2895r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Classes}
	\begin{itemize}
		\item Destructeurs \mintinline{cpp}|consteval|
		\item Données statiques dans les classes locales non nommées
	\end{itemize}

	\addproposal{p3421}{https://wg21.link/p3421r0}
	\addproposal{p3588}{https://wg21.link/p3588r1}
\end{frame}

\subsection*{Énumération}
\begin{frame}[fragile]
	\frametitle{Énumération}
	\begin{itemize}
		\item Ajout d'énumérations \og{}\textit{flag-only}\fg{}
		\item Fonctions membres sur les énumérations
	\end{itemize}

	\addproposal{p2966}{https://wg21.link/p2966r1}
\end{frame}

\subsection*{Gestion d'erreur}
\begin{frame}[fragile]
	\frametitle{Gestion d'erreur}
	\begin{itemize}
		\item Exceptions légères (\textit{Zero-overhead deterministic exceptions})
		\item Objet standard pour le retour d'erreur (\mintinline{cpp}|status_code| et \mintinline{cpp}|error|)
		\item Récupération des informations de l'exception contenue dans un \mintinline{cpp}|std::exception_ptr|
	\end{itemize}

	\addproposal{P2927}{https://wg21.link/p2927r0}
	\addproposal{P1028}{https://wg21.link/p1028r5}
\end{frame}

\subsection*{Conteneurs}
\begin{frame}[fragile]
	\frametitle{Conteneurs}
	\begin{itemize}
		\item Nouveaux conteneurs
		\begin{itemize}
			\item Tableaux multidimensionnels \mintinline{cpp}|std::mdarray|
			\item Queue concurrente
			\item Vecteur utilisant un buffer externe
			\item Conteneurs intrusifs : conteneurs non possédants

\note[item]{Intrusif car les mécanismes nécessaires au conteneur (p.ex. les pointeurs de chaînage des listes) sont dans l'objet que gère le conteneur, généralement via héritage}

			\item Conteneurs \mintinline{cpp}|inplace| avec un buffer de taille fixe
			\item Vecteurs optimisés pour les petites tailles
		\end{itemize}
		\item Contrôle de la politique de croissance des vecteurs
		\item Ajout de \mintinline{cpp}|push_front()| à \mintinline{cpp}|std::vector|
		\item Allocateur pour \mintinline{cpp}|std::inplace_vector|
		\item Comparaison entre \mintinline{cpp}|std::inplace_vector| de capacités différentes
	\end{itemize}

	\addproposal{P1684}{https://wg21.link/p1684r5}
	\addproposal{P0260}{https://wg21.link/p0260r7}
	\addproposal{P3001}{https://wg21.link/p3001r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p3147}{https://wg21.link/p3147r0}
	\addproposal{p3160}{https://wg21.link/p3160r0}
	\addproposal{p3698}{https://wg21.link/p3698r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Conteneurs}
	\begin{itemize}
		\item \mintinline{cpp}|span| de taille fixe
		\item Ajout de \mintinline{cpp}|at()| à \mintinline{cpp}|std::mdspan|
		\item Relâchement des contraintes sur les tableaux C
		\begin{itemize}
			\item Initialisation des tableaux d'agrégats
			\item Copies de tableaux
			\item Tableau comme type de retour
		\end{itemize}
		\item Correction de dysfonctionnements de \mintinline{cpp}|std::flat_map| et \mintinline{cpp}|std::flat_set|
		\item Ajout de \mintinline{cpp}|get()|, \mintinline{cpp}|get_ref()| et \mintinline{cpp}|get_as()| à \mintinline{cpp}|std::map| et \mintinline{cpp}|std::unordered_map| : récupération de la valeur associée à une clé
		\item Support des graphes et des algorithmes de manipulation des graphes
		\item Initialisation de tableau via une expansion de pattern
	\end{itemize}

	\begin{minted}{cpp}
		// Initialisation de tous les elements a 5
		int a[42] = { 5 ... };
	\end{minted}

	\addproposal{P2767}{https://wg21.link/p2767r1}
	\addproposal{P1709}{https://wg21.link/p1709r5}
	\addproposal{P3110}{https://wg21.link/p3110r0}
	\addproposal{p3383}{https://wg21.link/p3383r1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Conteneurs}
	\begin{itemize}
		\item Support des \textit{node-handle} par \mintinline{cpp}|std::list| et \mintinline{cpp}|std::forward_list|
		\item Ajout de \mintinline{cpp}|pop_value()| à \mintinline{cpp}|std::stack|, \mintinline{cpp}|std::queue| et \mintinline{cpp}|std::priority_queue|
		\item Fonction libre d'accès \og{}range-checked\fg{} à un élément \mintinline{cpp}|std::at()|
	\end{itemize}

	\addproposal{p3049}{https://wg21.link/p3049r0}
	\addproposal{p3182}{https://wg21.link/p3182r0}
	\addproposal{p3404}{https://wg21.link/p3404r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Chaînes de caractères}
	\begin{itemize}
		\item Construction de \mintinline{cpp}|std::string_view| depuis des chaînes implicites
		\item Prise en charge de \mintinline{cpp}|std::string_view| par \mintinline{cpp}|std::from_chars|
		\item Modification du constructeur de \mintinline{cpp}|std::string| depuis un caractère pour interdire les autres numériques (entiers ou flottants)
		\item Voire dépréciation de la construction d'un \mintinline{cpp}|std::string| depuis un caractère
		\item \mintinline{cpp}|fixed_string| : chaîne de caractères utilisable au compile-time
		\item Ajout de \mintinline{cpp}|first()| et de \mintinline{cpp}|last()| à \mintinline{cpp}|std::string| et \mintinline{cpp}|std::string_view| pour récupérer les $n$ premiers ou derniers caractères
		\item \mintinline{cpp}|std::zstring_view| équivalent à \mintinline{cpp}|std::string_view| garantissant la présence d'un \mintinline[escapeinside=||]{cpp}{|\textbackslash|0} terminal
		\item Sentinelle pour les chaînes null-terminée, pour l'usage de range sur ces chaînes
	\end{itemize}

	\addproposal{p3094}{https://wg21.link/p3094r6}
	\addproposal{p3283}{https://wg21.link/p3283r0}
	\addproposal{P3655}{https://wg21.link/P3655R1}
	\addproposal{P3710}{https://wg21.link/P3710R0}
\end{frame}

\subsection*{Tuples}
\begin{frame}[fragile]
	\frametitle{Tuples}
	\begin{itemize}
		\item Récupération d'un index depuis un type pour \mintinline{cpp}|std::variant| et \mintinline{cpp}|std::tuple|
		\item Utilisation de tableaux C comme \textit{tuple-like}
		\item Utilisation d'\textit{aggregates} comme \textit{tuple-like}
		\item Amélioration de l'ergonomie d'accès aux champs des \mintinline{cpp}|std::tuple|
	\end{itemize}

	\begin{minted}{cpp}
		t[0ic]

		// Equivalent a

		std::get<0>(t)
	\end{minted}

	\addproposal{p2527}{https://wg21.link/p2527r2}
	\addproposal{p2141}{https://wg21.link/p2141r1}
\end{frame}

\subsection*{std::optional}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::optional|}
	\begin{itemize}
		\item Support des références par \mintinline{cpp}|std::optional|
		\item \mintinline{cpp}|value_or_construct()| : construction paresseuse de l'alternative
		\item \mintinline{cpp}|value_or_else()| : appel paresseux d'une fonction en l'absence de valeur
	\end{itemize}

	\addproposal{p2988}{https://wg21.link/p2988r1}
	\addproposal{p3413}{https://wg21.link/p3413r0}
\end{frame}

\subsection*{Guarded objects}
\begin{frame}[fragile]
	\frametitle{\textit{Guarded objects}}
	\begin{itemize}
		\item Classes templates protégeant un objet en imposant la prise d'un lock avant l'utilisation
	\end{itemize}

	\begin{block}{Motivation}
		Éviter l'oubli de verrouillage d'un mutex avant l'utilisation d'un objet partagé
	\end{block}

	\addproposal{p3497}{https://wg21.link/p3497r0}
\end{frame}

\subsection*{Itérateurs}
\begin{frame}[fragile]
	\frametitle{Itérateurs}
	\begin{itemize}
		\item API \og itérateurs\fg{} de génération des nombres aléatoire
		\item \mintinline{cpp}|std::iterator_interface| pour la définition de nouveaux itérateurs
	\end{itemize}

	\addproposal{p2727}{https://wg21.link/p2727r3}
\end{frame}

\subsection*{Algorithmes}
\begin{frame}[fragile]
	\frametitle{Algorithmes}
	\begin{itemize}
		\item \mintinline{cpp}|std::find_last()| recherche depuis la fin d'un conteneur
		\item \mintinline{cpp}|std::is_uniqued| test l'absence de deux valeurs consécutives identiques
		\item Gestion des UUID
		\item Fonctions statistiques (moyenne, médiane, variance, \ldots{})
		\item Améliorations du générateur aléatoire
		\item Ajout de fonctions \og{}simples\fg{} pour la génération de nombres aléatoires
		\item Manipulation de bits : \mintinline{cpp}|bit_reverse|, \mintinline{cpp}|bit_repeat|, \mintinline{cpp}|bit_compress|, \mintinline{cpp}|bit_expand|, \mintinline{cpp}|next_bit_permutation| et \mintinline{cpp}|prev_bit_permutation|
		\item Fonctions membres \mintinline{cpp}|one()|, \mintinline{cpp}|countl_zero()|, \mintinline{cpp}|countl_one()|, \mintinline{cpp}|countr_zero()|, \mintinline{cpp}|countr_one()|, \mintinline{cpp}|rotl()|, \mintinline{cpp}|rotr()| et \mintinline{cpp}|reverse()| à \mintinline{cpp}|std::bitset|
		\item \mintinline{cpp}|std::first_factor| retourne le plus petit facteur premier d'un nombre
		\item \mintinline{cpp}|std::uninitialized_relocate|, \mintinline{cpp}|std::uninitialized_relocate_n| et  \mintinline{cpp}|std::uninitialized_relocate_backward|
	\end{itemize}

	\addproposal{P2848}{https://wg21.link/P2848R0}
	\addproposal{p1708}{https://wg21.link/p1708r7}
	\addproposal{p2681}{https://wg21.link/p2681r1}
	\addproposal{p3689}{https://wg21.link/p3689r0}
	\addproposal{p3104}{https://wg21.link/p3104r0}
	\addproposal{p3103}{https://wg21.link/p3103r0}
	\addproposal{p3133}{https://wg21.link/p3133r0}
	\addproposal{p3516}{https://wg21.link/p3516r1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Algorithmes}
	\begin{itemize}
		\item \mintinline{cpp}|std::isqrt()| : racine entière d'un nombre positif

\note[item]{Plus grand entier dont le carré est inférieur ou égal au nombre initial}

		\item \mintinline{cpp}|std::clmul()| : multiplication sans retenu (\textit{XOR multiplication})
		\item Fonctions de manipulation de caractères
		\begin{itemize}
			\item \mintinline{cpp}|is_ascii|, \mintinline{cpp}|is_ascii_alpha|, \mintinline{cpp}|is_ascii_alphanumeric|, \ldots
			\item \mintinline{cpp}|ascii_to_lower|, \mintinline{cpp}|ascii_to_upper|
			\item \mintinline{cpp}|ascii_case_insensitive_compare|, \mintinline{cpp}|ascii_case_insensitive_equal|
			\item Alternative plus riche et robuste aux fonctions de \mintinline{cpp}|<cctype>|

\note[item]{Support de \mintinline{cpp}|char8_t|, \mintinline{cpp}|char16_t| et \mintinline{cpp}|char32_t|, fonction \mintinline{cpp}|constexpr|, meilleure gestion typage}

			\item Fonctions libres de manipulation de \textit{string view-like}
			\begin{itemize}
				\item \mintinline{cpp}|std::starts_with()| et \mintinline{cpp}|std::ends_with()|
				\item \mintinline{cpp}|std::join()|
				\item \mintinline{cpp}|std::is_null_or_empty()|
			\end{itemize}
		\end{itemize}
	\end{itemize}

	\addproposal{p3605}{https://wg21.link/p3605r0}
	\addproposal{p3642}{https://wg21.link/p3642r0}
	\addproposal{p3688}{https://wg21.link/p3688r0}
	\addproposal{p3711}{https://wg21.link/p3711r0}
\end{frame}

\subsection*{Ranges}
\begin{frame}[fragile]
	\frametitle{Ranges}
	\begin{itemize}
		\item Ajout d'un paramètre \mintinline{cpp}|pas| à \mintinline{cpp}|std::iota_view|
		\item Utilisation de \mintinline{cpp}|std::get_element<>| comme point de configuration
	\end{itemize}

	\begin{minted}{cpp}
		// Tri sur le premier element du tuple
		vector<tuple<int, int>> v{{3,1},{2,4},{1,7}};

		ranges::sort(v, less{}, get_element<0>);
	\end{minted}

	\begin{itemize}
		\item Plusieurs nouveaux adaptateurs : \mintinline{cpp}|adjacent_filter|, \mintinline{cpp}|adjacent_remove_if|, \mintinline{cpp}|c_str|, \mintinline{cpp}|generate|, \ldots
		\item \mintinline{cpp}|views::maybe| contient 0 ou 1 élément d'un objet
		\item \mintinline{cpp}|views::nullable| adapte un type nullable en un range du type sous-jacent
		\item Construction d'une \mintinline{cpp}|sub-string_view| depuis \mintinline{cpp}|std::string|
		\item Levée des restriction de \mintinline{cpp}|range::to| pour accepter les vues
	\end{itemize}

	\addproposal{p2769}{https://wg21.link/p2769r1}
	\addproposal{p1255}{https://wg21.link/p1255r12}
	\addproposal{p3044}{https://wg21.link/p3044r0}
	\addproposal{p3544}{https://wg21.link/p3544r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Ranges}
	\begin{itemize}
		\item \mintinline{cpp}|views::upto| : séquence d'entiers de 0 à $n - 1$
		\item \mintinline{cpp}|views::scan| : version paresseuse de \mintinline{cpp}|std::inclusive_scan|
		\item \mintinline{cpp}|std::ranges::any_view| : vue \og{}type-erasure\fg{}
		\item \mintinline{cpp}|std::ranges::views::slice| : prends une tranche d'un range
	\end{itemize}

	\addproposal{p3060}{https://wg21.link/p3060r1}
	\addproposal{p3351}{https://wg21.link/p3351r1}
	\addproposal{p3411}{https://wg21.link/p3411r0}
	\addproposal{p3216}{https://wg21.link/p3216r0}
\end{frame}

\subsection*{Traits}
\begin{frame}[fragile]
	\frametitle{Traits}
	\begin{itemize}
		\item Trait \mintinline{cpp}|std::is_narrowing_convertible|
		\item Traits et fonctions pour garantir des conversions sans perte
		\begin{itemize}
			\item \mintinline{cpp}|is_value_preserving_convertible_v|
		\end{itemize}
		\item Trait indiquant si un type \textit{trivially default constructible} peut être initialisé en mettant tous les octets à 0
		\item Amélioration de l'ergonomie de \mintinline{cpp}|std::integral_constant<int>|
		\item \mintinline{cpp}|std::is_always_exhaustive| indique qu'un objet ne contient pas de bit de padding
	\end{itemize}

	\addproposal{p0870}{https://wg21.link/p0870r5}
	\addproposal{p2782}{https://wg21.link/p2782r0}
	\addproposal{P2509}{https://wg21.link/P2509R1}
	\addproposal{p3707}{https://wg21.link/p3707r0}
\end{frame}

\subsection*{Programmation fonctionnelle}
\begin{frame}[fragile]
	\frametitle{Lambda}
	\begin{itemize}
		\item Capture mutable partielle par les lambdas
	\end{itemize}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::function|}
	\begin{itemize}
		\item \mintinline{cpp}|std::inplace_function| : pendant de \mintinline{cpp}|std::function| sans allocation
		\item \mintinline{cpp}|std::function_ptr_t| : pointeur générique sur une fonction
	\end{itemize}

	\addproposal{p2828}{https://wg21.link/p2828r2}
	\addproposal{p2986}{https://wg21.link/p2986r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
\end{frame}

\subsection*{Attributs}
\begin{frame}[fragile]
	\frametitle{Attributs}
	\begin{itemize}
		\item Attributs sur les expressions
		\item Attributs sur les contrats
		\item Réservation des attributs sans namespace et avec le namespace \mintinline{cpp}|std|
		\item Possibilité d'implémenter des attributs utilisateurs
		\item Nouveaux attributs
		\begin{itemize}
			\item \mintinline{cpp}|[[invalidate_dereferencing]]| : \mintinline{cpp}|*ptr| et \mintinline{cpp}|ptr->| inutilisables après l'appel

\note[item]{P.ex. sur \mintinline{cpp}|realloc|}

			\item \mintinline{cpp}|[[invalidate]]| : \mintinline{cpp}|ptr|, \mintinline{cpp}|*ptr| et \mintinline{cpp}|ptr->| inutilisables après l'appel

\note[item]{P.ex. sur \mintinline{cpp}|free|}

			\item \mintinline{cpp}|[[no_copy]]| : types et fonctions ne permettant pas la copie (mais le déplacement et le RVO)
			\item \mintinline{cpp}|[[rvo]]| : fonctions utilisables uniquement dans un contexte RVO
			\item \mintinline{cpp}|[[side_effect_free]]| ou \mintinline{cpp}|[[pure]]|
			\item \mintinline{cpp}|[[trivially_relocatable]]|
			\item \mintinline{cpp}|[[discard]]| indique qu'un retour de fonction est volontairement ignoré
		\end{itemize}
	\end{itemize}

	\addproposal{p2992}{https://wg21.link/p2992r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
\end{frame}

\subsection*{Expansion}
\begin{frame}[fragile]
	\frametitle{Expansion statement}
	\begin{itemize}
		\item Répétition d'une expression au \textit{compile-time}
	\end{itemize}

	\begin{minted}{cpp}
		auto foo = make_tuple(0, 'a', 3.14);

		for... (auto elem : tup)
		  cout << elem << "\n";
	\end{minted}

	\begin{itemize}
		\item []
		\begin{itemize}
			\item Duplication de l'expression pour chaque élément (pas de boucle)
			\item Éléments de type différent
			\item Utilisable sur \mintinline{cpp}|std::tuple|, \mintinline{cpp}|std::array|, classes destructurables, \ldots{}
		\end{itemize}
	\end{itemize}
\end{frame}

\subsection*{Parameters pack}
\begin{frame}[fragile]
	\frametitle{Parameters pack}
	\begin{itemize}
		\item Généralisation et simplification des \textit{parameters pack}
		\begin{itemize}
			\item Déclaration possible partout où une variable peut être déclarée
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		template <typename... Ts>
		struct Foo { Ts... elems; };
	\end{minted}

	\begin{itemize}
		\item []
		\begin{itemize}
			\item \textit{Slicing} de \textit{packs}
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		auto x = Foo(a1, [:]t1..., [3:]t2..., a2);
		bar([1:]t1..., a3, [0]t1);
	\end{minted}

	\addproposal{p2994}{https://wg21.link/p2994r0}
	\addproposal{p2662}{https://wg21.link/p2662r2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Parameters pack}
	\begin{itemize}
		\item []
		\begin{itemize}
			\item \textit{Pack} de taille fixe
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		template<unsigned int N> struct my_vector {
		  my_vector(int...[N] v) : values{v...} {}
		};
	\end{minted}

	\begin{itemize}
		\item []
		\begin{itemize}
			\item \textit{Variadic function} homogène
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		template <class T>
		void f(T... vs);
	\end{minted}

\note[item]{La fonction prend un nombre quelconque de paramètres, mais tous du type T}

	\begin{itemize}
		\item []
		\begin{itemize}
			\item \textit{Unpack} de \mintinline{cpp}|std::tuple| à la volée
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		int sum(int x, int y, int z) { return x + y + z; }

		tuple<int, int, int> point{1, 2, 3};
		int s = sum(point.elems...);
	\end{minted}
\end{frame}

\subsection*{Flux}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::format|}
	\begin{itemize}
		\item Amélioration du support de \mintinline{cpp}|std::chrono::time_point|
		\begin{itemize}
			\item \mintinline{cpp}|%s| : nombre de ticks depuis l'epoch
			\item Ajout de précision aux secondes pour le formatage des fractions de secondes
			\item \mintinline{cpp}|%f| : fractions de secondes
		\end{itemize}
		\item Ajout de formateurs
		\begin{itemize}
			\item Valeurs atomiques
			\item Générateurs aléatoires et distributions
			\item \textit{Smart pointers}
			\item \mintinline{cpp}|std::optional|, \mintinline{cpp}|std::variant|, \mintinline{cpp}|std::any| et \mintinline{cpp}|std::expected|
			\item \mintinline{cpp}|std::mdspan|, \mintinline{cpp}|std::flat_map| et \mintinline{cpp}|std::flat_set|
			\item \mintinline{cpp}|charN_t|
			\item \mintinline{cpp}|error_code|
		\end{itemize}
		\item \mintinline{cpp}|std::format_as()| : formateurs personnalisés basé sur un autre type (p.ex. formatage d'enum comme entiers)
	\end{itemize}

	\addproposal{p2945}{https://wg21.link/p2945r0}
	\addproposal{p3015}{https://wg21.link/p3015r0}
	\addproposal{p2930}{https://wg21.link/p2930r0}
	\addproposal{p3258}{https://wg21.link/p3258r0}
	\addproposal{p3070}{https://wg21.link/p3070r1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::dump|}
	\begin{itemize}
		\item Imprime les paramètres de la fonction
	\end{itemize}

	\begin{minted}{cpp}
		std::dump(arg1, arg2, ..., argn);
		// Equivalant a
		std::println("{} {} ... {}", arg1, arg2, ..., argn);
	\end{minted}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::scan|}
	\begin{itemize}
		\item Pendant du formatage de texte introduit en C++20
		\item Alternative sûre et robuste à \mintinline{cpp}|sscanf()|
		\item Extensible aux types utilisateurs
		\item Compatible avec les itérateurs et les ranges
	\end{itemize}

	\begin{minted}{cpp}
		string key;
		int value;
		scan("answer = 42", "{} = {}", key, value);
		//    ~~~~~~~~~~~~~  ~~~~~~~~~  ~~~~~~~~~~
		//        entree       format    arguments
		// key : "answer", value : 42
	\end{minted}

	\begin{minted}{cpp}
		string key;
		chrono::seconds time;
		scan("start = 10:30", "{0} = {1:%H:%M}", key, time);
	\end{minted}
\end{frame}

\subsection*{Durées et temps}
\begin{frame}[fragile]
	\frametitle{Durées et temps}
	\begin{itemize}
		\item Ajout d'une fonction membre \mintinline{cpp}|resolution()| aux horloges
		\item Ajout d'horloges \og{}coarses\fg{} moins précises mais plus rapides
	\end{itemize}

	\addproposal{p3382}{https://wg21.link/p3382r0}
\end{frame}

\subsection*{Templates}
\begin{frame}[fragile]
	\frametitle{Templates}
	\begin{itemize}
		\item Instanciation possible de templates au \textit{runtime} (JIT limité aux templates)

\note[item]{P.ex. pour des matrices dont la taille n'est pas connue à la compilation}

		\item Paramètre template universel

\note[item]{Utile pour la création de méta-fonctions template \textit{high-order}, pour avoir des \mintinline{cpp}|static_assert(false)| dépendants et pour certains tests sur les types}

		\item Templates dans les classes locales
		\item Rendre les \mintinline{cpp}|<>| vides optionnels
	\end{itemize}

	\addproposal{p2989}{https://wg21.link/p2989r0}
\end{frame}

\subsection*{Concepts}
\begin{frame}[fragile]
	\frametitle{Concepts}
	\begin{itemize}
		\item Concept pour les algorithmes numériques
		\item \mintinline{cpp}|std::integer| pour les nombres entiers
		\item \mintinline{cpp}|std::signed_integer| et \mintinline{cpp}|std::unsigned_integer|
	\end{itemize}

	\begin{block}{\mintinline[style=white]{cpp}|std::integer| vs. \mintinline[style=white]{cpp}|std::integral|}
		\mintinline{cpp}|char| et \mintinline{cpp}|bool| ne sont pas des \mintinline{cpp}|std::integer|
	\end{block}

	\addproposal{p3003}{https://wg21.link/p3003r0}
	\addproposal{p3701}{https://wg21.link/p3701r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Concepts}
	\begin{itemize}
		\item \mintinline{cpp}|either| et \mintinline{cpp}|neither|
	\end{itemize}

	\begin{minted}{cpp}
		void func(either<char, short> auto) {...}
		// Equivalent a
		template<typename T>
		requires(same_as<T, char> or same_as<T, short>)
		void func(T) {...}
	\end{minted}

	\begin{minted}{cpp}
		void func(neither<short, int> auto) {...}
		// Equivalent a
		template<typename T>
		requires(not same_as<T, short> and not same_as<T, int>)
		void func(T) {...}
	\end{minted}

	\addproposal{p3625}{https://wg21.link/p3625r0}
\end{frame}

\subsection*{Polymorphismes}
\begin{frame}[fragile]
	\frametitle{Type erasure}
	\begin{itemize}
		\item Programmation polymorphique via \textit{type erasure} : \textit{Proxy}, \textit{Facade}, \textit{Addresser}

\note[item]{Alternative à la POO et programmation fonctionnelle éliminant certaines de leurs limites}
	\end{itemize}
\end{frame}

\subsection*{Gestion mémoire}
\begin{frame}[fragile]
	\frametitle{Références}
	\begin{itemize}
		\item Ajout de références possédantes, \mintinline{cpp}|T~|, gérant la destruction de l'objet référencé
		\item \textit{Reallocation constructor} transférant la responsabilité de l'objet initial à l'objet créé : \mintinline{cpp}|T::T(T~)|
	\end{itemize}

	\addproposal{p2839}{https://wg21.link/p2839r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Pointeurs}
	\begin{itemize}
		\item Suppression de \mintinline{cpp}|NULL| et interdiction de \mintinline{cpp}|0| comme pointeur nul
		\item Surcharge de \mintinline{cpp}|new| retournant la taille réellement allouée
		\item \mintinline{cpp}|pointer_in_range| vérifie si un pointeur est dans une plage
	\end{itemize}

	\addproposal{p0901}{https://wg21.link/p0901r11}
	\addproposal{p3234}{https://wg21.link/p3234r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Pointeurs intelligents}
	\begin{itemize}
		\item \mintinline{cpp}|std::retain_ptr| pointeur intrusif manipulant le comptage de référence interne
		\item Création de pointeurs intelligents avec une valeur par défaut
		\item Comparaison entre pointeurs intelligents et pointeurs nus
		\item Retour covariant avec \mintinline{cpp}|std::unique_ptr<T>| (comme \mintinline{cpp}|T*|)
		\item Amélioration des \textit{hazard pointers}
		\item Conversion de \mintinline{cpp}|std::unique_ptr| : \mintinline{cpp}|const_pointer_cast| et \mintinline{cpp}|dynamic_pointer_cast|
	\end{itemize}

	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p3135}{https://wg21.link/p3135r0}
	\addproposal{p3139}{https://wg21.link/p3139r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Contrôle mémoire}
	\begin{itemize}
		\item Mécanismes de sécurité de l'usage mémoire
		\begin{itemize}
			\item \textit{Aliasing}
			\item Suivi des dépendances
			\item Annotation de types
			\item Gestion de \textit{lifetime}
			\item \ldots
		\end{itemize}

		\item Accès à la taille réellement allouée
		\item Spécificateur de stockage des temporaires
		\begin{itemize}
			\item \mintinline{cpp}|constinit|
			\item \mintinline{cpp}|variable_scope|
			\item \mintinline{cpp}|block_scope| : durée de vie des littéraux C
			\item \mintinline{cpp}|statement_scope| : durée de vie des temporaires en C++
		\end{itemize}
		\item Seuils d'allocation SOO (\textit{Small Object Optimization})
	\end{itemize}

	\addproposal{p2771}{https://wg21.link/p2771r1}
	\addproposal{p2966}{https://wg21.link/p2966r1}
\end{frame}

\subsection*{Concurrence}
\begin{frame}[fragile]
	\frametitle{Concurrence}
	\begin{itemize}
		\item Invocation concurrente
		\item \mintinline{cpp}|std::volatile_load<T>| et \mintinline{cpp}|std::volatile_store<T>|
		\item Gestion des processus, de la communication avec ceux-ci et des \textit{pipes}
		\item \mintinline{cpp}|std::fiber_context| : changement de contexte \textit{stackfull} sans besoin de \textit{scheduler}
		\item Ajout d'un nom aux threads et mutex
		\item Contrôle de la priorité et de la taille de pile des threads
		\item Déclaration \mintinline{cpp}|const| des fonctions \mintinline{cpp}|lock()| et \mintinline{cpp}|unlock()| des mutex

\note[item]{Pour ne pas devoir déclaré \mintinline{cpp}|mutable| tous les mutex. Déjà le cas dans d'autres langages, p.ex. Rust}
	\end{itemize}

	\addproposal{p2689}{https://wg21.link/p2689r2}
	\addproposal{p0876}{https://wg21.link/p0876r14}
	\addproposal{p2019}{https://wg21.link/p2019r4}
	\addproposal{p3022}{https://wg21.link/p3022r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p3703}{https://wg21.link/p3703r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Coroutines}
	\begin{itemize}
		\item Bibliothèques de support des coroutines
		\item \mintinline{cpp}|std::lazy<T>| permettant l'évaluation différée
		\item Unification et amélioration des API asynchrones
	\end{itemize}
\end{frame}

\subsection*{Regex}
\begin{frame}[fragile]
	\frametitle{Regex}
	\begin{itemize}
		\item Ajout de regex \textit{compile-time}
	\end{itemize}
\end{frame}

\subsection*{Interface utilisateur}
\begin{frame}[fragile]
	\frametitle{Interface utilisateur}
	\begin{itemize}
		\item Support des entrées/sorties audio
		\item \mintinline{cpp}|std::web_view| API fournissant une fenêtre dans laquelle le programme peut injecter des composants web (ou être appelé via \textit{callback})
	\end{itemize}
\end{frame}

\subsection*{Compilation et implémentation}
\begin{frame}[fragile]
	\frametitle{Module}
	\begin{itemize}
		\item Exigences d'ABI sur les modules
		\item Communication d'informations aux outils de \textit{build} par les modules
		\item Gestion de la compatibilité ascendante via la configuration d'un \textit{epoch} au niveau d'un module pour activer des évolutions brisant la compatibilité
	\end{itemize}

	\addproposal{p2978}{https://wg21.link/p2978r0}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Compilation et implémentation}
	\begin{itemize}
		\item Remplaçant à \mintinline{cpp}|#ifdef| ... \mintinline{cpp}|#endif|
		\item API d'interaction avec le système de build et le compilateur
		\item Ajout d'un offset à \mintinline{cpp}|#embed|
	\end{itemize}

	\addproposal{p2978}{https://wg21.link/p2978r0}
	\addproposal{p2966}{https://wg21.link/p2966r1}
	\addproposal{p3540}{https://wg21.link/p3540r1}
\end{frame}
\end{document}