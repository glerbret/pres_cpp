\documentclass[C++.tex]{subfiles}
\begin{document}

\section{C++23 \og{}\textit{Pandemic Edition}\fg{}}
\subsection*{Présentation}
\begin{frame}
	\frametitle{Présentation}
	\begin{itemize}
		\item Travaux techniques terminés en février 2023
		\item Document final en cours de validation internationale
		\item Dernier \textit{Working Draft} : \href{https://github.com/cplusplus/draft/releases/download/n4917/n4917.pdf}{n4917\linklogo}
	\end{itemize}
\end{frame}

\subsection*{Organisation}
\begin{frame}
	\frametitle{Changements d'organisation du comité}
	\begin{itemize}
		\item Création d'un \textit{ABI Review Group} : étude des impacts des évolutions sur l'ABI
		\item Création d'un \textit{Study Group} pour la liaison C/C++ (SG22)
		\item Création d'un \textit{Study Group} \textit{safety and security} (SG23)
	\end{itemize}
\end{frame}

\subsection*{Dépréciations et suppressions}
\begin{frame}[fragile]
	\frametitle{Dépréciations et suppressions}
	\begin{itemize}
		\item Suppression des fonctionnalités liées au support d'un GC

\note[item]{Suppression directe, sans dépréciation. Pas utilisées en pratique}

		\item Dépréciation de \mintinline{cpp}|std::aligned_storage| et \mintinline{cpp}|std::aligned_union|
		\item Dépréciation de \mintinline{cpp}|std::std::numeric_limits::has_denorm|
	\end{itemize}
\end{frame}

\subsection*{Syntaxe}
\begin{frame}[fragile]
	\frametitle{Espaces en fin de ligne}
	\begin{itemize}
		\item Espaces ignorés après le \mintinline{cpp}|\| de séparation de ligne
	\end{itemize}

	\begin{minted}{cpp}
		// Toujours une chaine vide en C++23
		auto str = "\<space>
		";
	\end{minted}

\note[item]{Avant soit une chaîne vide, soit \mintinline{cpp}|"\ "| selon le compilateur}

	\addproposal{P2223}{https://wg21.link/P2223R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Label}
	\begin{itemize}
		\item Label autorisé en fin de bloc
		\item Reprise d'une évolution C2X
	\end{itemize}

	\begin{minted}{cpp}
		void foo(void) {
		  int x;
		  x = 1;
		last:
		}
	\end{minted}

	\addproposal{P2324}{https://wg21.link/P2324R2}
\end{frame}

\subsection*{Compilation conditionnelle et macro}
\begin{frame}[fragile]
	\frametitle{Compilation conditionnelle}
	\begin{itemize}
		\item Ajout de \mintinline{cpp}|#elifdef| et \mintinline{cpp}|#elifndef|
		\item Équivalents à \mintinline{cpp}|#elif defined| et \mintinline{cpp}|#elif not defined|
	\end{itemize}

	\begin{minted}{cpp}
		#ifdef FOO
		...
		#elifdef BAR
		...
		#endif
	\end{minted}

	\begin{itemize}
		\item Se combinent avec \mintinline{cpp}|#if| et \mintinline{cpp}|#elif|
	\end{itemize}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:16,positionColumn:1,positionLineNumber:16,selectionStartColumn:1,selectionStartLineNumber:16,startColumn:1,startLineNumber:16),source:'%23include+%3Ciostream%3E%0A+%0A//%23define+FOO%0A//%23define+BAR%0A%0Aint+main()%0A%7B%0A%23ifdef+FOO%0A++std::cout+%3C%3C+%22FOO%5Cn%22%3B%0A%23elifdef+BAR%0A++std::cout+%3C%3C+%22BAR%5Cn%22%3B%0A%23else%0A++std::cout+%3C%3C+%22Autre%5Cn%22%3B%0A%23endif%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P2334}{https://wg21.link/P2334R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Avertissement}
	\begin{itemize}
		\item \mintinline{cpp}|#warning| génère un avertissement à la compilation

\note[item]{Déjà présent dans la plupart des compilateurs}
	\end{itemize}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:11,positionColumn:1,positionLineNumber:11,selectionStartColumn:1,selectionStartLineNumber:11,startColumn:1,startLineNumber:11),source:'%23include+%3Ciostream%3E%0A+%0Aint+main()%0A%7B%0A%23warning+%22Programme+vide%22%0A%0A%23if+0%0A%23error+%22Programme+vide%22%0A%23endif%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P2437}{https://wg21.link/P2437R1}
\end{frame}

\subsection*{Durée de vie}
\begin{frame}[fragile]
	\frametitle{Gestion explicite de la durée de vie}
	\begin{itemize}
		\item \mintinline{cpp}|std::start_lifetime_as| et \mintinline{cpp}|std::start_lifetime_as_array| indiquent qu'un objet est créé mais sans initialisation
	\end{itemize}

	\begin{minted}{cpp}
		struct X { int a, b; };
		
		X* p = start_lifetime_as<X>(malloc(sizeof(struct X));
		p->a = 1;
		p->b = 2;
	\end{minted}

	\addproposal{P2590}{https://wg21.link/P2590R2}
	\addproposal{P2679}{https://wg21.link/P2679R2}
\end{frame}

\subsection*{Types}
\begin{frame}[fragile]
	\frametitle{Types flottants étendus}
	\begin{itemize}
		\item \mintinline{cpp}|std::float16_t|, \mintinline{cpp}|std::float32_t|, \mintinline{cpp}|std::float64_t|, \mintinline{cpp}|std::float128_t|
		\begin{itemize}
			\item Types IEEE N-bit
			\item Support optionnel
		\end{itemize}
		\item \mintinline{cpp}|std::bfloat16_t|
		\begin{itemize}
			\item Type IEEE binary16
			\item Support optionnel
		\end{itemize}
		\item Suffixes littéraux correspondants (\mintinline{cpp}|f16|, \mintinline{cpp}|f32|, \mintinline{cpp}|f64|, \mintinline{cpp}|f128| et \mintinline{cpp}|bf16|)
		\item Prise en compte par \mintinline{cpp}|std::format|, \mintinline{cpp}|std::ostream| et \mintinline{cpp}|std::istream|
		\item Prise en compte par \mintinline{cpp}|std::numeric_limits| et \mintinline{cpp}|std::is_floating_point|
		\item Ajout de surcharges dans \mintinline{cpp}|<cmath>|, \mintinline{cpp}|<complex>| et \mintinline{cpp}|<atomic>|
	\end{itemize}

	\begin{alertblock}{Types indépendants}
		Types indépendants (pas d'alias) de \mintinline{cpp}|float|, \mintinline{cpp}|double| ou \mintinline{cpp}|long double|
	\end{alertblock}

	\addproposal{P1467}{https://wg21.link/P1467R9}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Évolutions de \mintinline[style=white]{cpp}|char8_t|}
	\begin{itemize}
		\item Initialisation d'un tableau de \mintinline{cpp}|char| ou d'\mintinline{cpp}|unsigned char| depuis une chaîne littérale UTF-8
	\end{itemize}

	\addproposal{P2513}{https://wg21.link/P2513R4}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Relâchement des contraintes de \mintinline[style=white]{cpp}|wchar_t|}
	\begin{itemize}
		\item Suppression de la contrainte
	\end{itemize}

	\begin{block}{}
		The values of type \mintinline{cpp}|wchar_t| can represent distinct codes for all members of the largest extended character set specified among the supported locale
	\end{block}

	\begin{itemize}		
		\item Permet l'utilisation de \mintinline{cpp}|wchar_t| pour représenter des caractères UTF-16 ou UCS-2 sur des systèmes supportant UTF-8

\note[item]{Tous les codes points Unicode (21 bits) ne sont pas représentables sur un \mintinline{cpp}|wchar_t| 16 bits}
\note[item]{Déjà le cas sur Visual C++}
	\end{itemize}

	\addproposal{P2460}{https://wg21.link/P2460R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Conversions}
	\begin{itemize}
		\item Ajout d'une conversion implicite en booléen
		\begin{itemize}
			\item Dans les \mintinline{cpp}|static_assert|
			\item Dans les \mintinline{cpp}|if constexpr|
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		// Valide en C++23, pas en C++20
		if constexpr(flags & 0x01) { ... }
		else { ... }
	\end{minted}

	\begin{minted}{cpp}
		// Valide en C++23, pas en C++20
		template <std::size_t N>
		class Foo { static_assert(N, "Message"); };
	\end{minted}

\note[item]{En pratique, ces codes étaient déjà acceptées, au moins sous GCC et clang}

	\begin{itemize}
		\item \mintinline{cpp}|auto(x)| et \mintinline{cpp}|auto{x}| convertissent \mintinline{cpp}|x| en \textit{prvalue}

\note[item]{C'est une \textit{decay-copy} (copie faible ?)}
\note[item]{\mintinline{cpp}|auto a = x| construit une \textit{lvalue}, non une \textit{prvalue}}
	\end{itemize}

	\addproposal{P1401}{https://wg21.link/P1401R5}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Énumérations}
	\begin{itemize}
		\item \mintinline{cpp}|std::to_underlying| convertit une énumération vers le type sous-jacent
	\end{itemize}

	\begin{minted}{cpp}
		enum class FOO : uint32_t { A = 0xABCDEF };

		auto bar = to_underlying(FOO::A); // uint32_t
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:6,endLineNumber:17,positionColumn:5,positionLineNumber:17,selectionStartColumn:6,selectionStartLineNumber:17,startColumn:5,startLineNumber:17),source:'%23include+%3Ciostream%3E%0A%23include+%3Cutility%3E%0A%23include+%3Ccstdint%3E%0A%23include+%3Ctypeinfo%3E%0A%23include+%3Ccassert%3E%0A%0Aenum+class+FOO+:+uint32_t+%0A%7B+%0A++A+%3D+0xABCDEF,%0A%7D%3B%0A%0Aint+main()%0A%7B%0A++auto+bar+%3D+std::to_underlying(FOO::A)%3B%0A%0A++assert(typeid(bar)+%3D%3D+typeid(uint32_t))%3B%0A%23if+1%0A++assert(typeid(bar)+%3D%3D+typeid(int))%3B%0A%23endif%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1682}{https://wg21.link/P1682R3}
\end{frame}

\subsection*{constexpr}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|constexpr|}
	\begin{itemize}
		\item Relâchement de contrainte sur les fonctions \mintinline{cpp}|constexpr|
		\begin{itemize}
			\item Code non évalué au \textit{compile-time}

\note[item]{Soit la fonction n'est en pratique jamais appelée au \textit{compile-time} soit la branche contenant ce code n'est exécutée qu'au \textit{run-time}}

			\begin{itemize}
				\item Variables non littérales
				\item Utilisation de \mintinline{cpp}|goto|
				\item Retour non littéral
				\item Paramètres non littéraux
				\item Appel de fonctions non \mintinline{cpp}|constexpr|
			\end{itemize}
			\item Code non évalué au \textit{compile-time} ou utilisable dans un contexte constant
			\begin{itemize}
				\item Variables \mintinline{cpp}|static| ou \mintinline{cpp}|thread_local|

\note[item]{P.ex. une variable \mintinline{cpp}|static| \mintinline{cpp}|constexpr|}
			\end{itemize}
			\item Valeur non utilisée
			\begin{itemize}
				\item Utilisation de pointeurs ou références inconnus

\note[item]{P.ex. \mintinline{cpp}|sizeof *ptr|}
			\end{itemize}
		\end{itemize}
		\item Conversion implicite de fonctions \mintinline{cpp}|constexpr| en \mintinline{cpp}|consteval| 

\note[item]{Lorsque la fonction ne peut qu'être invoquée au \textit{compile-time}}

		\item Davantage de \mintinline{cpp}|constexpr| dans la bibliothèque standard
	\end{itemize}

	\addproposal{P2242}{https://wg21.link/P2242R3}
	\addproposal{P2448}{https://wg21.link/P2448R2}
	\addproposal{P2647}{https://wg21.link/P2647R1}
\end{frame}

\subsection*{if consteval}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|if consteval|}
	\begin{itemize}
		\item Branche prise en compte si le code est évalué au \textit{compile-time}
		\item Peut appeler des fonctions immédiate

\note[item]{P.ex. dans une fonction \mintinline{cpp}|constexpr|}

		\item \mintinline{cpp}|else| pour le code évalué au \textit{run-time}
	\end{itemize}

	\begin{minted}{cpp}
		consteval int foo(int i) { return i; }

		constexpr int bar(int i) {
		  if consteval { return foo(i) + 1; } 
		  else { return 42; } }
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:27,positionColumn:1,positionLineNumber:27,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%0Aconsteval+int+foo(int+i)%0A%7B%0A++return+i%3B%0A%7D%0A%0Aconstexpr+int+bar(int+i)%0A%7B%0A++if+consteval%0A++%7B%0A++++return+foo(i)+%2B+1%3B%0A++%7D%0A++else%0A++%7B%0A++++return+42%3B%0A++%7D%0A%7D%0A%0Aint+main()%0A%7B%0A++std::cout+%3C%3C+bar(5)+%3C%3C+%22%5Cn%22%3B%0A%0A++constexpr+int+baz+%3D+bar(10)%3B%0A++std::cout+%3C%3C+baz+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1938}{https://wg21.link/P1938R3}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|if consteval|}
	\begin{itemize}
		\item Négation possible
	\end{itemize}

	\begin{minted}{cpp}
		if not consteval { ... }

		// Ou

		if ! consteval { ... }
	\end{minted}

	\begin{alertblock}{Attention}
		\begin{itemize}
			\item Accolades obligatoires, même avec une unique instruction
		\end{itemize}
	\end{alertblock}
\end{frame}

\subsection*{Sémantique de déplacement}
\begin{frame}[fragile]
	\frametitle{Sémantique de déplacement}
	\begin{itemize}
		\item Simplification des règles de déplacement implicite
		\item \mintinline{cpp}|std::move_only_function| équivalent \textit{move-only} de \mintinline{cpp}|std::function|
	\end{itemize}

	\addproposal{P2266}{https://wg21.link/P2266R3}
	\addproposal{P0288}{https://wg21.link/P0288R9}
\end{frame}

\subsection*{Range-based for loop}
\begin{frame}[fragile]
	\frametitle{Durée de vie des temporaires}
	\begin{itemize}
		\item Extension de la durée de vie des objets temporaires créés dans l'initialisation d'un \textit{range-based for loop} jusqu'à la fin de la boucle
	\end{itemize}

	\begin{minted}{cpp}
		const vector<int>& foo(const vector<int>& t) { return t; }
		vector<int> bar( return vector<int>{1, 2, 3}; );

		// Valide, duree de vie du retour de bar est etendu
		for (auto e : foo(bar())) { ... }
	\end{minted}

	\addproposal{P2718}{https://wg21.link/P2718R0}
\end{frame}

\subsection*{init-statement}
\begin{frame}[fragile]
	\frametitle{init-statement}
	\begin{itemize}
		\item \mintinline{cpp}|using| possible dans l'\textit{init-statement} de \mintinline{cpp}|if|, \mintinline{cpp}|switch| et \mintinline{cpp}|for|
	\end{itemize}

	\begin{minted}{cpp}
		for(using T = int; T e : v)
		{ ... }
	\end{minted}

\note[item]{En C++20, il est possible d'utiliser \mintinline{cpp}|typedef| dans l'\textit{init-statement}}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:13,positionColumn:1,positionLineNumber:13,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%23include+%3Cvector%3E%0A%0Aint+main()%0A%7B%0A++std::vector%3Cint%3E+v%7B1,+2,+5%7D%3B%0A+%0A++for(using+T+%3D+int%3B+T+e+:+v)%0A++%7B%0A++++std::cout+%3C%3C+e+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P2360}{https://wg21.link/P2360R0}
\end{frame}

\subsection*{Littéraux}
\begin{frame}[fragile]
	\frametitle{Encodage}
	\begin{itemize}
		\item Support des fichiers sources en UTF-8

\note[item]{Auparavant supporté par plusieurs compilateurs, pas imposé par la norme}

		\item Encodage identique entre le préprocesseur et le code C++

\note[item]{Auparavant les deux encodages pouvaient être différents}
\note[item]{Et ainsi \mintinline{cpp}|\#if 'A' == '\\x41'| et \mintinline{cpp}|if('A' == 0x41)| donner des résultats différents}
	\end{itemize}

	\addproposal{P2295}{https://wg21.link/P2295R6}
	\addproposal{P2316}{https://wg21.link/P2316R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Suffixes littéraux}
	\begin{itemize}
		\item Suffixe \mintinline{cpp}|uz| pour \mintinline{cpp}|size_t|

\note[item]{Ou toute autre combinaison de U et Z, minuscule ou majuscule}

		\item Suffixe \mintinline{cpp}|z| pour le type entier signé correspondant à \mintinline{cpp}|size_t|

\note[item]{Typiquement le retour de \mintinline{cpp}|std::ssize()|}
\note[item]{Correspond à \mintinline{cpp}|ptrdiff_t| ou \mintinline{cpp}|ssize_t|}

		\item \mintinline{cpp}|z| utilisable pour les littéraux binaires, octaux ou hexadécimaux de \mintinline{cpp}|size_t|
	\end{itemize}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:15,positionColumn:1,positionLineNumber:15,selectionStartColumn:1,selectionStartLineNumber:15,startColumn:1,startLineNumber:15),source:'%23include+%3Ciostream%3E%0A%23include+%3Ctypeinfo%3E%0A%0Aint+main()%0A%7B%0A++auto+i+%3D+5uz%3B%0A++auto+j+%3D+5z%3B%0A%0A++std::cout+%3C%3C+std::boolalpha%3B%0A++std::cout+%3C%3C+(typeid(i)+%3D%3D+typeid(size_t))+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+(typeid(i)+%3D%3D+typeid(int))+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+(typeid(j)+%3D%3D+typeid(size_t))+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+(typeid(j)+%3D%3D+typeid(ptrdiff_t))+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P0330}{https://wg21.link/P0330R8}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Chaînes littérales}
	\begin{itemize}
		\item Plus de concaténation de chaînes littérales adjacentes d'encodage différent
	\end{itemize}

	\begin{minted}{cpp}
		L"" u"";   // Invalide
		L"" u8"";  // Invalide
		L"" U"";   // Invalide
		u8"" L"";  // Invalide
		u8"" u"";  // Invalide
		u8"" U"";  // Invalide
		u"" L"";   // Invalide
		u"" u8"";  // Invalide
		u"" U"";   // Invalide
		U"" L"";   // Invalide
		U"" u"";   // Invalide
		U"" u8"";  // Invalide
	\end{minted}

	\begin{block}{Et si  ?}
		Si une des chaînes n'a pas d'encodage, on utilise celui de la seconde
	\end{block}

	\addproposal{P2201}{https://wg21.link/P2201R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Caractères littéraux}
	\begin{itemize}
		\item Caractères Unicode conservés durant la phase du préprocesseur
	\end{itemize}

	\begin{minted}{cpp}
		#define S(x) # x
		// C++23 : "Köppe"
		const char * s1 = S(Köppe);
		const char * s2 = S(K\u00f6ppe);
	\end{minted}

\note[item]{En pratique, avant C++23, le traitement dépend du compilateur}

	\begin{itemize}
		\item Suppression des caractères littéraux larges non codables ou multi-caractères
		\item Ajout de séquences d'échappement délimitées

\note[item]{Délimitées et pas de taille fixe}

		\begin{itemize}
			\item \mintinline[escapeinside=||]{cpp}{|\textbackslash|u{}} prenant un nombre arbitraire de chiffres hexadécimaux
			\item \mintinline[escapeinside=||]{cpp}{|\textbackslash|x{}} prenant un nombre arbitraire de chiffres hexadécimaux
			\item \mintinline[escapeinside=||]{cpp}{|\textbackslash|o{}} prenant un nombre arbitraire de chiffres octaux
		\end{itemize}
		\item Ajout de séquences d'échappement nommés \mintinline[escapeinside=||]{cpp}{|\textbackslash|N{...}}
	\end{itemize}

	\begin{minted}{cpp}
		cout << "\N{GREEK SMALL LETTER ETA WITH PSILI}";
	\end{minted}

	\addproposal{P2314}{https://wg21.link/P2314R4}
	\addproposal{P2362}{https://wg21.link/P2362R3}
	\addproposal{P2290}{https://wg21.link/P2290R3}
	\addproposal{P2071}{https://wg21.link/P2071R2}
\end{frame}

\subsection*{Opérateurs}
\begin{frame}[fragile]
	\frametitle{Évolutions des opérateurs d'égalité}
	\begin{itemize}
		\item Modification des règles de résolution de \mintinline{cpp}|operator==| et \mintinline{cpp}|operator!=|
		\item Corrige des ambiguïtés introduites par la réécriture de \mintinline{cpp}|==| et \mintinline{cpp}|!=| en C++20

\note[item]{En pratique, les compilateurs, notamment GCC, sont plus laxistes que ce qu'impose la norme et accepte silencieusement des cas ambigus}

		\item \mintinline{cpp}|operator==| est utilisé pour réécrire \mintinline{cpp}|operator!=| et la forme inverse de \mintinline{cpp}|operator==| uniquement si \mintinline{cpp}|operator!=| n'existe pas 
	\end{itemize}

	\begin{minted}{cpp}
		struct Foo {
		  bool operator==(const Foo&) { return true; }
		  bool operator!=(const Foo&) { return false; }
		};

		// Ambigu en C++20
		bool b = Foo{} != Foo{};
	\end{minted}

\note[item]{Ambiguïté provoquée par l'absence de \mintinline{cpp}|const|, l'opérateur défini ne matche pas directement et deux réécritures (via \mintinline{cpp}|operator==| et via \mintinline{cpp}|operator!=|) sont éligibles}

	\addproposal{P2468}{https://wg21.link/P2468R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|operator[]| multidimensionnel}
	\begin{itemize}
		\item Définition de \mintinline{cpp}|operator[]| avec aucun ou plusieurs arguments
		\item Y compris des arguments \textit{variadic}
	\end{itemize}

	\begin{minted}{cpp}
		T& operator[]();
		T& operator[](size_t x, size_t y, size_t z);

		foo[3, 2, 1] = 42
	\end{minted}

\note[item]{Auparavant : utilisation de \mintinline{cpp}|operator()|, de chaîne d'appel de \mintinline{cpp}|[]| ou d'une surcharge de \mintinline{cpp}|operator[]| prenant un agrégat \textit{tuple-like}}

	\begin{block}{Au-delà de C++23}
		\begin{itemize}
			\item Réécritures
			\begin{itemize}
				\item De \mintinline{cpp}|a[x][y][z]| en \mintinline{cpp}|a[x, y, z]|
				\item De \mintinline{cpp}|a(x, y, z)| en \mintinline{cpp}|a[x][y][z]| (et  \mintinline{cpp}|a(x)| en \mintinline{cpp}|a[x]|)
				\item De \mintinline{cpp}|a[x, y, z]| en \mintinline{cpp}|a[x][y][z]|
			\end{itemize}
			\item Extension aux tableaux C, aux conteneurs standards existants et aux \mintinline{cpp}|operator[]| non-membres
		\end{itemize}
	\end{block}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:21,positionColumn:1,positionLineNumber:21,selectionStartColumn:1,selectionStartLineNumber:21,startColumn:1,startLineNumber:21),source:'%23include+%3Ciostream%3E%0A%23include+%3Carray%3E%0A%0Atemplate+%3Ctypename+T,+std::size_t+Z,+std::size_t+Y,+std::size_t+X%3E%0Astruct+Array3d%0A%7B%0A++T%26+operator%5B%5D(std::size_t+z,+std::size_t+y,+std::size_t+x)%0A++%7B%0A++++return+foo%5Bz+*+Y+*+X+%2B+y+*+X+%2B+x%5D%3B%0A++%7D%0A%0A++std::array%3CT,+X+*+Y+*+Z%3E+foo%3B%0A%7D%3B%0A+%0Aint+main()%0A%7B%0A++Array3d%3Cint,+4,+3,+2%3E+bar%3B%0A++bar%5B3,+2,+1%5D+%3D+42%3B%0A++std::cout+%3C%3C+bar%5B3,+2,+1%5D+%3C%3C+!'%5Cn!'%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P2128}{https://wg21.link/P2128R6}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Opérateurs \mintinline[style=white]{cpp}|static|}
	 \begin{itemize}
	 	\item Possibilité de déclarer \mintinline{cpp}|static| des \mintinline{cpp}|operator()|
	 \end{itemize}

 	\begin{minted}{cpp}
		struct Foo {
		  static constexpr bool operator()(int i, int j) { return i < j; }
		};

		static_assert(Foo::operator()(1, 2));
	\end{minted}

	 \begin{itemize}
	 	\item Possibilité de déclarer \mintinline{cpp}|static| des \mintinline{cpp}|operator[]|
	 \end{itemize}

 	\begin{minted}{cpp}
		struct Foo {
		  static int operator[](int i) { return v[i]; }
		  static constexpr array<int, 4> v{5, 8, 9, 12};
		};

		cout << Foo::operator[](2) << "\n";
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-9mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:19,positionColumn:1,positionLineNumber:19,selectionStartColumn:1,selectionStartLineNumber:19,startColumn:1,startLineNumber:19),source:'%23include+%3Ciostream%3E%0A%0Astruct+Foo%0A%7B%0A%23if+1%0A++static+constexpr+bool+operator()(int+i,+int+j)%0A%23else%0A++constexpr+bool+operator()(int+i,+int+j)%0A%23endif%0A++%7B%0A++++return+i+%3C+j%3B%0A++%7D%0A%7D%3B%0A%0Aint+main()%0A%7B%0A++static_assert(Foo::operator()(1,+2))%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:22,positionColumn:1,positionLineNumber:22,selectionStartColumn:1,selectionStartLineNumber:22,startColumn:1,startLineNumber:22),source:'%23include+%3Ciostream%3E%0A%23include+%3Carray%3E%0A%0Astruct+Foo%0A%7B%0A%23if+1%0A++static+int+operator%5B%5D(int+i)%0A%23else%0A++int+operator%5B%5D(int+i)%0A%23endif%0A++%7B%0A++++return+v%5Bi%5D%3B%0A++%7D%0A%0A++static+constexpr+std::array%3Cint,+4%3E+v%7B5,+8,+9,+12%7D%3B%0A%7D%3B%0A%0Aint+main()%0A%7B%0A++std::cout+%3C%3C+Foo::operator%5B%5D(2)+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1169}{https://wg21.link/P1169R4}
	\addproposal{P2589}{https://wg21.link/P2589R0}
\end{frame}

\subsection*{Programmation fonctionnelle}
\begin{frame}[fragile]
	\frametitle{Évolutions des lambdas}
	\begin{itemize}
		\item \mintinline{cpp}|()| optionnelles en l'absence de paramètres dans les lambdas mutables

\note[item]{Optionnelles dans tous les autres cas en C++20 et précédents}

		\item Utilisation du \textit{name lookup} du corps de la lambda pour son retour
	\end{itemize}

	\begin{minted}{cpp}
		// Ne compile pas en C++20 et precedents
		auto foo = [j=0]() mutable -> decltype(j) { return j++; };
	\end{minted}

\note[item]{Auparavant, la résolution de nom du retour ne prenait pas en compte les variables capturées}

	\begin{itemize}
		\item Ajout du support d'attributs pour les lambdas
	\end{itemize}

	\begin{minted}{cpp}
		[] [[ attr ]] () ->int { return 42; };
	\end{minted}

	\addproposal{P1102}{https://wg21.link/P1102R2}
	\addproposal{P2036}{https://wg21.link/P2036R3}
	\addproposal{P2173}{https://wg21.link/P2173R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Évolutions des lambdas}
	\begin{itemize}
		\item Support des attributs \mintinline{cpp}|[[ nodiscard ]]|, \mintinline{cpp}|[[ deprecated ]]|, \mintinline{cpp}|[[ noreturn ]]|
		\item Lambdas \mintinline{cpp}|static| : \mintinline{cpp}|operator()| de l'objet généré est \mintinline{cpp}|static|
	\end{itemize}
	
	\begin{alertblock}{Limites}
		\begin{itemize}
			\item \mintinline{cpp}|static| et \mintinline{cpp}|mutable| sont mutuellement exclusifs
			\item Liste de capture vide
		\end{itemize}
	\end{alertblock}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::invoke_r()|}
	\begin{itemize}
		\item Similaire à \mintinline{cpp}|std::invoke()|
		\item Retour convertit vers le premier paramètre template
		\item Ou ignoré si le premier paramètre template est \mintinline{cpp}|void|
	\end{itemize}

	\addproposal{P2136}{https://wg21.link/P2136R3}
\end{frame}

\subsection*{Attributs}
\begin{frame}[fragile]
	\frametitle{Évolutions des attributs}
	\begin{itemize}
		\item Duplication possible d'un attribut dans une liste d'attributs
	\end{itemize}

	\begin{minted}{cpp}
		// Valide en C++23, pas en C++20
		[[ nodiscard, nodiscard ]]
		int foo();
	\end{minted}

	\addproposal{P2156}{https://wg21.link/P2156R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Nouveaux attributs}
	\begin{itemize}
		\item \mintinline{cpp}|[[ assume(expression) ]]| permet au compilateur d'optimiser en supposant la véracité de l'expression
	\end{itemize}

	\begin{alertblock}{Contrainte}
		\begin{itemize}
			\item Expression doit être vraie à l'emplacement de \mintinline{cpp}|assume|

\note[item]{UB dans le cas contraire}
		\end{itemize}
	\end{alertblock}

	\addproposal{P1774}{https://wg21.link/P1774R8}
\end{frame}

\subsection*{Classe}
\begin{frame}[fragile]
	\frametitle{Layout}
	\begin{itemize}
		\item Suppression de la possibilité donnée aux compilateurs de réordonner les données d'accessibilité différente
	\end{itemize}

	\addproposal{P1847}{https://wg21.link/P1847R4}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Paramètre \mintinline[style=white]{cpp}|this| explicite / deducing \mintinline[style=white]{cpp}|this|}
	\begin{itemize}
		\item Limitation ses surcharges \mintinline{cpp}|const| / non \mintinline{cpp}|const| de fonctions membres
		\item Utilisation d'un premier paramètre, préfixé \mintinline{cpp}|this|, notant l'instance de classe
	\end{itemize}

	\begin{minted}{cpp}
		struct Foo {
		  void bar(this Foo const&);
		}
	\end{minted}

	\begin{alertblock}{Restrictions}
		\begin{itemize}
			\item Ne peuvent pas être \mintinline{cpp}|virtual| ni \mintinline{cpp}|static|
			\item Ne peuvent pas avoir de \textit{cv-qualifier} ni de \textit{ref-qualifier}
		\end{itemize}
	\end{alertblock}

	\addproposal{P0847}{https://wg21.link/P0847R7}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Paramètre \mintinline[style=white]{cpp}|this| explicite / deducing \mintinline[style=white]{cpp}|this|}
	\begin{itemize}
		\item Utilisation des règles classiques de déduction de types 
	\end{itemize}

	\begin{minted}{cpp}
		struct Foo {
		  template <typename Self>
		  void bar(this Self&&, int);
		};

		void ex(Foo& foo, D& d) {
		  foo.bar(1);       // Self=Foo&
		  move(foo).bar(2); // Self=Foo
		}
	\end{minted}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Paramètre \mintinline[style=white]{cpp}|this| explicite / deducing \mintinline[style=white]{cpp}|this|}
	\begin{itemize}
		\item Permet le passage de \mintinline{cpp}|this| par valeur
	\end{itemize}

	\begin{minted}{cpp}
		struct Foo {
		  void bar()(this Foo, int i);
		};

		Foo{}(4);
	\end{minted}
\end{frame}

\subsection*{Template}
\begin{frame}[fragile]
	\frametitle{Déduction dans les constructeurs hérités}
	\begin{itemize}
		\item Déduction des paramètres templates d'un constructeur hérité
	\end{itemize}

	\begin{minted}{cpp}
		template <typename T> struct A {
		  A(T);
		};
		template <typename T> struct B : public A<T> {
		  using A<T>::A;
		};

		B b(42);	// OK B<int>
	\end{minted}

	\addproposal{P2582}{https://wg21.link/P2582R1}
\end{frame}

\subsection*{Exceptions}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|noexcept|}
	\begin{itemize}
		\item Ajout de \mintinline{cpp}|noexcept| à plusieurs fonctions de la bibliothèque standard
	\end{itemize}
\end{frame}

\subsection*{Traits}
\begin{frame}[fragile]
	\frametitle{Traits}
	\begin{itemize}
		\item \mintinline{cpp}|std::is_scoped_enum| indique si un type est un \mintinline{cpp}|enum class|
	\end{itemize}

	\begin{minted}{cpp}
		class A {};
		enum E {};
		enum struct Es {};
		enum class Ec : int {};

		is_scoped_enum_v<A>;    // Faux
		is_scoped_enum_v<E>;    // Faux
		is_scoped_enum_v<Es>;   // Vrai
		is_scoped_enum_v<Ec>;   // Vrai
		is_scoped_enum_v<int>;  // Faux
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:29,positionColumn:1,positionLineNumber:29,selectionStartColumn:1,selectionStartLineNumber:29,startColumn:1,startLineNumber:29),source:'%23include+%3Ciostream%3E%0A%23include+%3Ctype_traits%3E%0A%0Aclass+A%0A%7B%0A%7D%3B%0A%0Aenum+E%0A%7B%0A%7D%3B%0A%0Aenum+struct+Es+%0A%7B%0A%7D%3B%0A%0Aenum+class+Ec+:+int+%0A%7B%0A%7D%3B%0A%0Aint+main()%0A%7B%0A++std::cout+%3C%3C+std::boolalpha%3B%0A++std::cout+%3C%3C+std::is_scoped_enum_v%3CA%3E+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+std::is_scoped_enum_v%3CE%3E+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+std::is_scoped_enum_v%3CEs%3E+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+std::is_scoped_enum_v%3CEc%3E+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+std::is_scoped_enum_v%3Cint%3E+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1048}{https://wg21.link/P1048R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Traits}
	\begin{itemize}
		\item \mintinline{cpp}|std::is_implicit_lifetime| indique si un objet à une durée de vie implicite
		\item \mintinline{cpp}|std::reference_constructs_from_temporary| et \mintinline{cpp}|std::reference_converts_from_temporary| indiquent si la référence est construite depuis un temporaire
	\end{itemize}

	\addproposal{P2674}{https://wg21.link/P2674R1}
	\addproposal{P2255}{https://wg21.link/P2255R2}
\end{frame}

\subsection*{Conteneurs}
\begin{frame}[fragile]
	\frametitle{Chaînes de caractères}
	\begin{itemize}
		\item \mintinline{cpp}|contains()| teste la présence d'une sous-chaîne dans une chaîne ou une vue
	\end{itemize}

	\begin{minted}{cpp}
		string foo = "Hello world";
		foo.contains("Hello");   // true
		foo.contains("monde");   // false

		string_view bar = foo;
		bar.contains("Hello");   // true
		bar.contains("monde");   // false
	\end{minted}

\note[item]{Comparaison \textit{case-sensitive} comme toutes les fonctions de recherche dans \mintinline{cpp}|std::string|}

	\begin{itemize}
		\item Interdiction de la construction de \mintinline{cpp}|std::string| depuis \mintinline{cpp}|nullptr|

\note[item]{Erreur de compilation, avant c'était un comportement indéfini}

		\item Construction de \mintinline{cpp}|std::string_view| depuis un range
		\item Ajout de la contrainte trivialement copiable à \mintinline{cpp}|std::string_view|
	\end{itemize}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:16,positionColumn:1,positionLineNumber:16,selectionStartColumn:1,selectionStartLineNumber:16,startColumn:1,startLineNumber:16),source:'%23include+%3Ciostream%3E%0A%23include+%3Cstring%3E%0A%23include+%3Cstring_view%3E%0A%0Aint+main()%0A%7B%0A++const+std::string+foo+%3D+%22Hello+world%22%3B%0A++std::cout+%3C%3C+std::boolalpha%3B%0A++std::cout+%3C%3C+foo.contains(%22Hello%22)+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+foo.contains(%22monde%22)+%3C%3C+%22%5Cn%22%3B%0A%0A++std::string_view+bar+%3D+foo%3B%0A++std::cout+%3C%3C+bar.contains(%22Hello%22)+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+bar.contains(%22monde%22)+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1679}{https://wg21.link/P1679R3}
	\addproposal{P2166}{https://wg21.link/P2166R1}
	\addproposal{P1989}{https://wg21.link/P1989R2}
	\addproposal{P2251}{https://wg21.link/P2251R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Chaînes de caractères}
	\begin{itemize}
		\item \mintinline{cpp}|resize_and_overwrite()| redimensionne et met à jour une chaîne
		\begin{itemize}
			\item Allocation d'un tableau de \mintinline{cpp}|count + 1| caractères
			\item Copie du contenu de la chaîne dans ce tableau

\note[item]{En se limitant à la taille allouée bien sûr}

			\item Appel à la fonction pour valoriser les caractères et déterminer la taille finale
			\item Mise à jour du contenu de la chaîne avec celui du tableau
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		string foo = "Hello ", bar = "world!";

		foo.resize_and_overwrite(20, 
		  [sz = foo.size(), bar] (char* buf, size_t buf_size) {
		    auto to_copy = min(buf_size - sz, bar.size());
		    memcpy(buf + sz, bar.data(), to_copy);
		    return sz + to_copy; });   // Hello world!
	\end{minted}

	\begin{block}{Motivation}
		Éviter des initialisations, des tests et des copies inutiles
	\end{block}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:20,positionColumn:1,positionLineNumber:20,selectionStartColumn:1,selectionStartLineNumber:20,startColumn:1,startLineNumber:20),source:'%23include+%3Ciostream%3E%0A%23include+%3Cstring%3E%0A%23include+%3Calgorithm%3E%0A%23include+%3Ccstring%3E%0A%0Aint+main()%0A%7B%0A++std::string+foo+%3D+%22Hello+%22%3B%0A++std::string+bar+%3D+%22world!!%22%3B%0A%0A++foo.resize_and_overwrite(20,+%0A++++++++++++++++++++++++++%5Bsz+%3D+foo.size(),+bar%5D+(char*+buf,+size_t+buf_size)+%0A++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++auto+to_copy+%3D+std::min(buf_size+-+sz,+bar.size())%3B%0A++++++++++++++++++++++++++++memcpy(buf+%2B+sz,+bar.data(),+to_copy)%3B%0A++++++++++++++++++++++++++++return+sz+%2B+to_copy%3B+%7D)%3B%0A%0A++std::cout+%3C%3C+foo++%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1072}{https://wg21.link/P1072R10}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::span|}
	\begin{itemize}
		\item Ajout de la contrainte trivialement copiable
	\end{itemize}

	\addproposal{P2251}{https://wg21.link/P2251R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::pair| et \mintinline[style=white]{cpp}|std::tuple|}
	\begin{itemize}
		\item Construction de \mintinline{cpp}|std::pair| depuis un \textit{braced initializers}

\note[item]{Code auparavant valide mais inefficace}
	\end{itemize}

	\begin{minted}{cpp}
		pair<string, vector<string>> foo("hello", {});
	\end{minted}

	\begin{itemize}
		\item Construction de \mintinline{cpp}|std::tuple| et \mintinline{cpp}|std::pair| depuis un \textit{tuple-like}
	\end{itemize}

	\begin{minted}{cpp}
		pair<int, double> foo = tuple{1, 3.0};
		tuple<int, int> bar = array{1, 3};
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
		\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
			\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:11,positionColumn:1,positionLineNumber:11,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%23include+%3Cutility%3E%0A%23include+%3Cvector%3E%0A%23include+%3Cstring%3E%0A%0Aint+main()%0A%7B%0A++std::pair%3Cstd::string,+std::vector%3Cstd::string%3E%3E+foo(%22hello%22,+%7B%7D)%3B%0A++std::cout+%3C%3C+foo.first+%3C%3C+%22+%22+%3C%3C+std::size(foo.second)+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1951}{https://wg21.link/P1951R1}
	\addproposal{P2165}{https://wg21.link/P2165R4}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::stack| et \mintinline[style=white]{cpp}|std::queue|}
	\begin{itemize}
		\item Création de \mintinline{cpp}|std::stack| et \mintinline{cpp}|std::queue| depuis une paire d'itérateurs
	\end{itemize}

	\begin{minted}{cpp}
		vector<int> v{1, 3, 7, 13};
		queue q(begin(v), end(v));
		stack s(begin(v), end(v));
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:16,positionColumn:1,positionLineNumber:16,selectionStartColumn:1,selectionStartLineNumber:16,startColumn:1,startLineNumber:16),source:'%23include+%3Ciostream%3E%0A%23include+%3Cvector%3E%0A%23include+%3Cqueue%3E%0A%23include+%3Cstack%3E%0A%0Aint+main()%0A%7B%0A++std::vector%3Cint%3E+v%7B1,+3,+7,+13%7D%3B%0A%0A++std::queue+q(std::begin(v),+std::end(v))%3B%0A++std::stack+s(std::begin(v),+std::end(v))%3B%0A%0A++std::cout+%3C%3C+q.front()+%3C%3C+%22%5Cn%22%3B%0A++std::cout+%3C%3C+s.top()+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1425}{https://wg21.link/P1425R4}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Conteneurs associatifs}
	\begin{itemize}
		\item Surcharge de \mintinline{cpp}|erase()| et \mintinline{cpp}|extract()| ne créant pas de clés temporaires
		\item Adaptateurs associatifs de conteneurs
		\begin{itemize}
			\item \mintinline{cpp}|std::flat_map| et \mintinline{cpp}|std::flat_multimap|
			\item \mintinline{cpp}|std::flat_set| et \mintinline{cpp}|std::flat_multiset|
			\begin{itemize}
				\item Adapte un conteneur séquentiel pour présenter une API de conteneur associatif
				\item Davantage \textit{cache-friendly}
				\item Clés et valeurs stockées dans deux conteneurs différents
			\end{itemize}
		\end{itemize}
	\end{itemize}

	\addproposal{P2077}{https://wg21.link/P2077R3}
	\addproposal{P0429}{https://wg21.link/P0429R9}
	\addproposal{P1222}{https://wg21.link/P1222R4}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::mdspan|}
	\begin{itemize}
		\item Vues multidimensionnelles
		\item Possibilité de fournir un \textit{layout} configurable
		\item Trois \textit{memory layouts} standards
		\begin{itemize}
			\item \mintinline{cpp}|layout_right| : \textit{layout} du C et du C++, lignes puis colonnes
			\item \mintinline{cpp}|layout_left| : \textit{layout} de Fortran ou Matlab, colonnes puis lignes
			\item \mintinline{cpp}|layout_stride| 
		\end{itemize}
		\item Accès à un élément via \mintinline{cpp}|operator[]| multi-paramètres (\mintinline{cpp}|[x,y,z]|)
	\end{itemize}

	\addproposal{P0009}{https://wg21.link/P0009R18}
	\addproposal{P2599}{https://wg21.link/P2599R2}
	\addproposal{P2604}{https://wg21.link/P2604R0}
	\addproposal{P2613}{https://wg21.link/P2613R1}
	\addproposal{P2763}{https://wg21.link/P2763R1}
\end{frame}

\subsection*{Itérateurs}
\begin{frame}[fragile]
	\frametitle{Évolutions des itérateurs}
	\begin{itemize}
		\item Corrections de \mintinline{cpp}|iterator_category| et \mintinline{cpp}|counted_iterator|
		\item \mintinline{cpp}|std::move_iterator<T*>| doit être un \textit{random access iterator}
		\item Modification des exigences sur les itérateurs des algorithmes \og{}non ranges\fg{} pour permettre l'utilisation de vues
	\end{itemize}

	\addproposal{P2259}{https://wg21.link/P2259R1}
	\addproposal{P2278}{https://wg21.link/P2278R4}
	\addproposal{P2408}{https://wg21.link/P2408R5}
	\addproposal{P2520}{https://wg21.link/P2520R0}
\end{frame}

\subsection*{Algorithmes}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::byteswap()|}
	\begin{itemize}
		\item Inverse les octets d'un entier
	\end{itemize}

	\begin{minted}{cpp}
		uint16_t i = 0xCAFE;
		byteswap(i);   // 0xFECA

		uint32_t j = 0xDEADBEEFu;
		byteswap(j);   // 0xEFBEADDE
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:13,positionColumn:1,positionLineNumber:13,selectionStartColumn:1,selectionStartLineNumber:13,startColumn:1,startLineNumber:13),source:'%23include+%3Ciostream%3E%0A%23include+%3Ccstdint%3E%0A%23include+%3Cbit%3E%0A%0Aint+main()%0A%7B%0A++uint16_t+i+%3D+0xCAFE%3B%0A++std::cout+%3C%3C+std::hex+%3C%3C+std::byteswap(i)+%3C%3C+%22%5Cn%22%3B%0A%0A++uint32_t+j+%3D+0xDEADBEEFu%3B%0A++std::cout+%3C%3C+std::hex+%3C%3C+std::byteswap(j)+%3C%3C+%22%5Cn%22%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P1272}{https://wg21.link/P1272R4}
\end{frame}

\subsection*{Flux}
\begin{frame}[fragile]
	\frametitle{Évolutions des flux}
	\begin{itemize}
		\item \mintinline{cpp}|spanstream| remplaçant de \mintinline{cpp}|strstream| utilisant un \mintinline{cpp}|std::span| comme buffer

\note[item]{\mintinline{cpp}|strstream| déprécié depuis C++98}

		\item Support du mode exclusif à \mintinline{cpp}|std::fstream|
	\end{itemize}

	\addproposal{P0448}{https://wg21.link/P0448R4}
	\addproposal{P2467}{https://wg21.link/P2467R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Évolutions de \mintinline[style=white]{cpp}|std::format|}
	\begin{itemize}
		\item Ajout du concept \mintinline{cpp}|formatable|
		\item Vérification des chaînes de format au \textit{compile-time}
		\item Ajout du type \mintinline{cpp}|?| pour afficher les chaînes échappées
		\item Formateur de \mintinline{cpp}|std::chrono| \textit{locale-independent} par défaut

\note[item]{Par cohérence avec tous les autres données}
	\end{itemize}

	\begin{minted}{cpp}
		format("{:%S}", sec(4.2));   // C++20 : 04,200 / C++23 : 04.200
		format("{:L%S}", sec(4.2));  // C++20 : exception / C++23 : 04,200
	\end{minted}

	\addproposal{P2572}{https://wg21.link/P2572R1}
	\addproposal{P2419}{https://wg21.link/P2419R2}
	\addproposal{P2372}{https://wg21.link/P2372R3}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Évolutions de \mintinline[style=white]{cpp}|std::format|}
	\begin{itemize}
		\item Formatage des types \mintinline{cpp}|std::generator|\textit{-like}
		\item Formatage des ranges
		\item Formatage des \mintinline{cpp}|std::pair| et \mintinline{cpp}|std::tuple|
		\item Formatage de \mintinline{cpp}|std::vector<bool>::reference|
		\item Formatage des conteneurs (si les éléments sont formatables)
		\begin{itemize}
			\item \mintinline{cpp}|std::map| et équivalent : \mintinline{cpp}|{k1: v1, k2: v2}|
			\item \mintinline{cpp}|std::set| et équivalent : \mintinline{cpp}|{v1, v2}|
			\item \mintinline{cpp}|std::vector|, \mintinline{cpp}|std::list|, \ldots{} : \mintinline{cpp}|[v1, v2]|
		\end{itemize}
		\item Formatage des \mintinline{cpp}|std::thread::id|
		\item Formatage des \mintinline{cpp}|std::stacktrace|
	\end{itemize}

	\addproposal{P2418}{https://wg21.link/P2418R2}
	\addproposal{P2286}{https://wg21.link/P2286R8}
	\addproposal{P2693}{https://wg21.link/P2693R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::print|}
	\begin{itemize}
		\item \mintinline{cpp}|std::print()| écrit directement dans \mintinline{cpp}|std::cout|
	\end{itemize}

	\begin{minted}{cpp}
		cout << format("Hello, {}!", name);

		// Devient

		print("Hello, {}!", name);
	\end{minted}

	\addproposal{P2093}{https://wg21.link/P2093R14}
	\addproposal{P2539}{https://wg21.link/P2539R3}
\end{frame}

\subsection*{Pointeurs intelligents}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::out_ptr| et \mintinline[style=white]{cpp}|std::inout_ptr|}
	\begin{itemize}
		\item Abstractions entre \textit{smart pointers} et API C modifiant un pointeur

\note[item]{Et pas uniquement le contenu pointé par le \textit{smart pointer}}

		\begin{itemize}
			\item Création d'un pointeur de pointeur temporaire depuis le \textit{smart pointer}
			\item Automatisation des appels à \mintinline{cpp}|reset()| et \mintinline{cpp}|release()|
			\item \textit{Exception-safe} : \textit{smart pointer} rétabli au retour de l'API C	

\note[item]{Pas d'exception dans le code C++ avant le rétablissement du \textit{smart pointer}}

			\item Permet le passage comme pointeur C \mintinline{cpp}|void*| ou \mintinline{cpp}|void**|
			\item Permet la conversion vers un type de pointeur arbitraire
		\end{itemize}
		\item \mintinline{cpp}|std::out_ptr| permetla modification de l'adresse contenu dans le \textit{smart pointer} sans l'utiliser
		\item \mintinline{cpp}|std::inout_ptr| permet la modification et l'utilisation de l'adresse contenu dans le \textit{smart pointer}
	\end{itemize}

	\addproposal{P1132}{https://wg21.link/P1132R8}
\end{frame}

\subsection*{Debug}
\begin{frame}[fragile]
	\frametitle{Bibliothèque de Stacktrace}
	\begin{itemize}
		\item Basée sur \mintinline{cpp}|Boost.stacktrace|
		\item \mintinline{cpp}|current()| récupère la \textit{stacktrace} courante
		\item Manipulation d'une \textit{stacktrace}
		\begin{itemize}
			\item \mintinline{cpp}|empty()| teste la présente d'entrée
			\item \mintinline{cpp}|size()| retourne le nombre d'entrée de la \textit{stacktrace}
			\item \mintinline{cpp}|begin()|, \mintinline{cpp}|end()|, \ldots{} retournent les itérateurs sur les entrées
			\item \mintinline{cpp}|operator[]| accède à une entrée donnée
			\item \mintinline{cpp}|to_string()| retourne la description de la \textit{stacktrace}
			\item \mintinline{cpp}|operator<<| affiche la \textit{stacktrace}
		\end{itemize}
		\item Manipulation des entrées de la \textit{stacktrace}
		\begin{itemize}
			\item \mintinline{cpp}|description()| retourne la description de l'entrée
			\item \mintinline{cpp}|source_file()| retourne le nom de la fonction
			\item \mintinline{cpp}|source_line()| retourne la ligne
		\end{itemize}
	\end{itemize}

	\addproposal{P0881}{https://wg21.link/P0881R7}
	\addproposal{P2301}{https://wg21.link/P2301R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Bibliothèque de Stacktrace}
	\begin{minted}{cpp}
		auto trace = stacktrace::current();
		for(const auto& entry: trace) {
		  cout << "Description: " << entry.description() << "\n";
		  cout << "file: " << entry.source_file() << "\n";
		  cout << "line: " << entry.source_line() << "\n";
		  cout << "------------------------------------" << "\n";
		}
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:20,positionColumn:1,positionLineNumber:20,selectionStartColumn:1,selectionStartLineNumber:20,startColumn:1,startLineNumber:20),source:'%23include+%3Cstacktrace%3E%0A%23include+%3Ciostream%3E%0A%0Avoid+foo()%0A%7B%0A++auto+trace+%3D+std::stacktrace::current()%3B%0A++for+(const+auto%26+entry:+trace)%0A++%7B%0A++++std::cout+%3C%3C+%22Description:+%22+%3C%3C+entry.description()+%3C%3C+%22%5Cn%22%3B%0A++++std::cout+%3C%3C+%22file:+%22+%3C%3C+entry.source_file()+%3C%3C+%22%5Cn%22%3B%0A++++std::cout+%3C%3C+%22line:+%22+%3C%3C+entry.source_line()+%3C%3C+%22%5Cn%22%3B%0A++++std::cout+%3C%3C+%22------------------------------------%22+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A%7D%0A%0Aint+main()%0A%7B%0A++foo()%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic+-lstdc%2B%2Bexp',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',tree:'1',wrap:'0'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::unreachable()|}
	\begin{itemize}
		\item \mintinline{cpp}|std::unreachable()| indique que la localisation n'est pas atteignable
		\item Permet d'optimiser en supposant que le code ne sera pas atteint
		\item Comportement indéfini si \mintinline{cpp}|std::unreachable()| est appelé
	\end{itemize}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:18,positionColumn:1,positionLineNumber:18,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%23include+%3Cutility%3E%0A%0Aint+main()%0A%7B%0A++int+i+%3D+1%3B%0A%0A++if(i+%3E+0)%0A++%7B%0A++++std::cout+%3C%3C+%22OK%5Cn%22%3B%0A++%7D%0A++else%0A++%7B%0A++++std::unreachable()%3B%0A++++std::cout+%3C%3C+%22Unreachable%5Cn%22%3B%0A++%7D%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P0627}{https://wg21.link/P0627R6}
\end{frame}

\subsection*{Multi-threading}
\begin{frame}[fragile]
	\frametitle{Atomiques}
	\begin{itemize}
		\item Support des \mintinline{cpp}|atomics| C
	\end{itemize}

	\addproposal{P0943}{https://wg21.link/P0943R6}
\end{frame}

\subsection*{Durées et temps}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|time_point::clock|}
	\begin{itemize}
		\item Relâchement des contraintes sur \mintinline{cpp}|time_point::clock|
		\begin{itemize}
			\item Plus grande flexibilité du type d'horloge
			\item Horloges \textit{stateful}, horloges externes
			\item Représentation d'un \textit{time of day} par un \mintinline{cpp}|time_point| particulier
		\end{itemize}
	\end{itemize}

	\addproposal{P2212}{https://wg21.link/P2212R2}
\end{frame}

\subsection*{Variant}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::variant|}
	\begin{itemize}
		\item Héritage possible de \mintinline{cpp}|std::variant|
		\item \mintinline{cpp}|std::visit()| restreints aux \mintinline{cpp}|std::variant|

\note[item]{Auparavant, les variants de \mintinline{cpp}|std::visit| pouvaient être formellement de n'importe quel type}
	\end{itemize}

	\addproposal{P2162}{https://wg21.link/P2162R2}
\end{frame}

\subsection*{Optional}
\begin{frame}[fragile]
	\frametitle{Opérations monadiques de \mintinline[style=white]{cpp}|std::optional|}
	\begin{itemize}
		\item \mintinline{cpp}|transform()| modifie la valeur contenu dans un \mintinline{cpp}|std::optional|

\note[item]{Peut modifier aussi éventuellement le type}

		\begin{itemize}
			\item Retourne un \mintinline{cpp}|std::optional| vide s'il n'y a pas de valeur stockée
			\item Retourne le résultat de la fonction sinon
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		optional<string> foo = "Abcdef", bar;

		foo.transform([](auto&& s) { return s.size(); });  // 6
		bar.transform([](auto&& s) { return s.size(); });  // Vide
	\end{minted}

	\addproposal{P0798}{https://wg21.link/P0798R8}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Opérations monadiques de \mintinline[style=white]{cpp}|std::optional|}
	\begin{itemize}
		\item \mintinline{cpp}|and_then()| dérive une fonction pour retourner un \mintinline{cpp}|std::optional|
	\end{itemize}

	\begin{minted}{cpp}
		auto func = [] (int i) -> optional<int> { return 2 * i; };
		optional<int> foo = 42, bar;

		foo.and_then(func);  // 84
		bar.and_then(func);  // Vide
	\end{minted}

	\begin{alertblock}{Retour de fonction}
		Le retour de la fonction doit être une spécialisation de \mintinline{cpp}|std::optional|
	\end{alertblock}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Opérations monadiques de \mintinline[style=white]{cpp}|std::optional|}
	\begin{itemize}
		\item \mintinline{cpp}|or_else()| 
		\begin{itemize}
			\item Retourne le \mintinline{cpp}|std::optional| s'il a une valeur
			\item Appelle une fonction sinon
		\end{itemize}
	\end{itemize}

	\begin{minted}{cpp}
		auto func = [] -> optional<string> { return "Oups!"; };

		optional<string> foo = "Abcdef", bar;

		foo.or_else(func);  // Abcdef
		bar.or_else(func);  // Oups!
	\end{minted}

	\begin{alertblock}{Retour de fonction}
		Le retour de la fonction doit être une spécialisation de \mintinline{cpp}|std::optional|
	\end{alertblock}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:30,positionColumn:1,positionLineNumber:30,selectionStartColumn:1,selectionStartLineNumber:30,startColumn:1,startLineNumber:30),source:'%23include+%3Ciostream%3E%0A%23include+%3Coptional%3E%0A%23include+%3Cstring%3E%0A%0Aint+main()%0A%7B%0A++%7B%0A++++std::optional%3Cstd::string%3E+foo+%3D+%22Abcdef%22%3B%0A++++auto+bar+%3D+foo.transform(%5B%5D(auto%26%26+s)+%7B+return+s.size()%3B+%7D)%3B%0A%0A++++std::cout+%3C%3C+(bar+%3F+*bar+:+0)+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A%0A++%7B%0A++++auto+func+%3D+%5B%5D+(int+i)+-%3E+std::optional%3Cint%3E+%7B+return+2+*+i%3B+%7D%3B%0A++++std::optional%3Cint%3E+foo+%3D+42%3B%0A++++auto+bar+%3D+foo.and_then(func)%3B%0A%0A++++std::cout+%3C%3C++(bar+%3F+*bar+:+0)+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A%0A++%7B%0A++++auto+func+%3D+%5B%5D+-%3E+std::optional%3Cstd::string%3E+%7B+return+%22Oups!!%22%3B+%7D%3B%0A++++std::optional%3Cstd::string%3E+foo+%3D+%22Abcdef%22%3B%0A++++auto+bar+%3D+foo.or_else(func)%3B%0A%0A++++std::cout+%3C%3C+*bar+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}
\end{frame}

\subsection*{Expected}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::expected|}
	\begin{itemize}
		\item Classe \mintinline{cpp}|std::expected<T, E>| contenant
		\begin{itemize}
			\item Soit une valeur de type \mintinline{cpp}|T|
			\item Soit une erreur de type \mintinline{cpp}|E|
		\end{itemize}
		\item \mintinline{cpp}|operator bool()| et \mintinline{cpp}|has_value()| indiquent si l'objet contient une valeur
		\item \mintinline{cpp}|operator->| et \mintinline{cpp}|operator*| accèdent à la valeur 
		\item \mintinline{cpp}|value()| retourne la valeur
		\item \mintinline{cpp}|error()| retourne l'erreur
	\end{itemize}

	\begin{minted}{cpp}
		expected<int, string> foo(int i) { ... }

		expected<int, string> e = foo(5);
		if(e)
		  cout << e.value();
		else
		  cout << e.error();
	\end{minted}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:'1',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:30,positionColumn:1,positionLineNumber:30,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Ciostream%3E%0A%23include+%3Cexpected%3E%0A%23include+%3Cstring%3E%0A%0Astd::expected%3Cint,+std::string%3E+foo(int+i)%0A%7B%0A++if(i+%3E+0)%0A++%7B%0A++++return+i%3B%0A++%7D%0A++else%0A++%7B%0A++++return+std::unexpected%7B%22Nul%22%7D%3B%0A++%7D%0A%7D%0A%0Aint+main()%0A%7B%0A++std::expected%3Cint,+std::string%3E+e+%3D+foo(5)%3B%0A%0A++if(e)%0A++%7B%0A++++std::cout+%3C%3C+%22Val+:+%22+%3C%3C+e.value()+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A++else%0A++%7B%0A++++std::cout+%3C%3C+%22Erreur+:+%22+%3C%3C+e.error()+%3C%3C+%22%5Cn%22%3B%0A++%7D%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:executor,i:(argsPanelShown:'1',compilationPanelShown:'0',compiler:gsnapshot,compilerName:'',compilerOutShown:'0',execArgs:'',execStdin:'',fontScale:14,fontUsePx:'0',j:1,lang:c%2B%2B,libs:!(),options:'-std%3Dc%2B%2B23+-Wall+-Wextra+-pedantic',overrides:!(),runtimeTools:!(),source:1,stdinPanelShown:'1',wrap:'1'),l:'5',n:'0',o:'Executor+x86-64+gcc+(trunk)+(C%2B%2B,+Editor+%231)',t:'0')),header:(),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P0323}{https://wg21.link/P0323R12}
	\addproposal{P2549}{https://wg21.link/P2549R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::expected|}
	\begin{itemize}
		\item \mintinline{cpp}|value_or()| retourne 
		\begin{itemize}
			\item La valeur si présente
			\item La valeur reçue en paramètre sinon
		\end{itemize}
		\item \mintinline{cpp}|transform()| modifie la valeur contenu dans un \mintinline{cpp}|std::expected|
		\item \mintinline{cpp}|and_then()| dérive une fonction pour retourner un \mintinline{cpp}|std::expected|
		\item \mintinline{cpp}|or_else()|
		\begin{itemize}
			\item Retourne la valeur si elle est présente
			\item Appelle une fonction avec l'erreur sinon
		\end{itemize}
	\end{itemize}

	\begin{alertblock}{Retour de fonction}
		Le retour de \mintinline{cpp}|and_then()| et \mintinline{cpp}|or_else()| doit être  \mintinline{cpp}|std::expected|
	\end{alertblock}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAMzwBtMA7AQwFtMQByARg9KtQYEAysib0QXACx8BBAKoBnTAAUAHpwAMvAFYTStJg1DIApACYAQuYukl9ZATwDKjdAGFUtAK4sGe1wAyeAyYAHI%2BAEaYxCAArACcpAAOqAqETgwe3r56KWmOAkEh4SxRMQm2mPYFDEIETMQEWT5%2BXJXVGXUNBEVhkdF6CvWNzTltQ929JWUSAJS2qF7EyOwc5gDMwcjeWADUJutuTkPEmKwH2CYaAIIbWzuY%2B4eYqkmYDpjoF1e3ZpsM2y8ewObhOwWA3xuPyG6BAIBebw%2BX0OwQIpF2MLhYKMF12/FQEFRuzwsx%2BJgA7FYbrtiVRCU9sLsNKTqftKT8aTTTgQlgxiQcqdcaRSACIc3ZVJTiimCzm7bm8jEEWEgLwhV7vAifGXmMzhWi60UC6XksVQ01km5ElhMYIQFm3dmsnWsmmY%2BEapEg1Ho93YiHrRmPA4ivGoAmxUnrWWc91oLwEJ5uEH7MxmABqYl2IFTZiTKcwADoAG5iLyYAD6JAgAFouLN84dcyZYm4GIboyazbdnU6hbHlXCEZrtSjBL7ByB/bjg%2BtQ/iIJHja6lSrh16x2jV1iCMRwTO8yGJYXd4YFPxiCwIC2rLFQ4TBMSGzL5ZgecQ%2BXmAFT86NskVRoK4o0ngdKYGYDpym6k7xomIIprqma0NmuaNm4EpmCWZaYPaaHNq27Zpsu/Y0pKmDAQOKqwXhurYMQpxLChup4eBhbRMQ1bPocCFEQRHYxkaUK9jGNJMAmqB4mqyBPKGN4tveRIkrsNa4u665asiRzjtuU67vugb7CuUHGWyFivu%2Bn67D%2BeACv%2BxFympnoad62l%2BnpOIGbO87hougEUY5iLOZuE4qtOnmHnOx6GOgFYEAgjDUFJflCSRtIQOBkFQXGixwdxTaIVmObMfBTasaW3g4Vxyb5bxbb8RRZEUdBVE5TRaZ0QxxBMWmLGYexnFtWYLZ1URna9t2JoibsYlEJJAIyfssS3veaAMEMOnTmYABsEr0SQDYqQZAUjppPobe5AaMk1Jlyi%2B2UJoNADyXhJAoYBgKhJXof1XVffhI1DX%2B103XKCofspXC2UaY2pcdG5aVubl7h5QYLQuS4ww5k7qaOCMhTuyOXRhC1FiQFZkYlALJT2qWgelEHXfduXVehBXIUVPV/WV2G4X9hp8aNU2NUZOnUXz7X0ZgjEcxFLMYWxe3ELzeWs7VhGAwJFrmt2HDzLQnCxLwfgcFopCoJwyaWNYGKLMswZ/DwpAEJouvzAA1nEGj6JwkhGy7ZucLwCggF7zsm7rpBwLASAvO84lkBQEANMACjKIYVRCAgqAAO7G47aAsEkdBMDUachLQmc58bpsF0X9AxCnzCvVnaK13Q0ShKwqy8G39fPcIWe5/7sfINcxAp4HpAj3U%2BDG7w/CCCIYjsFIMiCIoKjqOHpC6G0BhGCg1jWPoeARMHkDzKgSQ1MHHA1jCIamFblh/MpADqYjITWb8vKeylvOgQwjhkBB1tisQYypghlwzoPPOvBs7ECYEkTgPA9YGz9tvc2HBsCqDjkQLqqgAAcW0axbUkLsYAyBpIQF3GqN2DYICWysJYdEuBCAkFTOsesvAw5aFmPMeKTAsAxHtKQD2sQvb6w4L7Ug1deBYKDiHJ2Lt%2BHew4GYDBpsFHKPDqo4s0Q0jOEkEAA%3D%3D%3D}{\codelogo}};
	\end{tikzpicture}

	\addproposal{P2505}{https://wg21.link/P2505R5}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::expected|}
	\begin{itemize}
		\item \mintinline{cpp}|error_or()| retourne
		\begin{itemize}
			\item L'erreur si la valeur n'est pas présente
			\item Le paramètre sinon
		\end{itemize}

\note[item]{\mintinline{cpp}|error_or()| est le pendant de \mintinline{cpp}|value_or()| sur les erreurs}

		\item \mintinline{cpp}|transform_error()|
		\begin{itemize}
			\item Retourne la valeur si elle est présente
			\item Appelle une fonction avec l'erreur sinon
		\end{itemize}
	\end{itemize}

	\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=-5mm,yshift=6mm] at (current page.south east){%
		\href{https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAMzwBtMA7AQwFtMQByARg9KtQYEAysib0QXACx8BBAKoBnTAAUAHpwAMvAFYTStJg1DIApACYAQuYukl9ZATwDKjdAGFUtAK4sGe1wAyeAyYAHI%2BAEaYxCCSAKykAA6oCoRODB7evnrJqY4CQSHhLFEx8baY9vkMQgRMxASZPn5cFVXptfUEhWGR0XoKdQ1N2a2DXT3FpRIAlLaoXsTI7BzmAMzByN5YANQma25Og8SYrPvYJhoAguub25h7B5iqiZgOmOjnlzdmGwxbXl2%2Bzcx2CwC%2B11u/3ujzcyFBRghPz%2BAKBBzEwBIhAQLCRUNRD2BhGiTCIxDx10G6BAIGer3enwOwQIpB2VJpCPBa2wO34qAgzJ2eBm3xMAHYrNcdkKqALHjyNCKpXsJd9pdKTgRFgwhftJVdpeKACJqnaVJSm8X69U7TXatkEakgLwhF5vAgfK3mMzhWje416y1ik2Q4Oi66ClhMYIQJU3VXKr3K6Xs2luhlEwSs1Oc85mx5G3moflxEVra3q1NoLwEWHAs0AOmixBIAH0SBBvQB5LyJBTemZ1g57MxmExxNwMf3loMhm6JhMG9VMGuoXku5AFvZxKxxQsQNAMQYOp25swANjZg9NNtvt6te2Td%2BfKcdHIIxDBOwWBEDT5fd6ph%2BhgKPwxAsBAqZRMAMYKHMJ40q4kHwVBTDIAA1q2wRKA00QQD%2B8E3gBxEkeOu5GhALqpMAIToDsyAIPU9EihKtqYFqxA6kBCyJK8xAHmWFgqoWglESR6p2px341n%2BS7iYaYYzpCT6pnS7qekyWYISAubcvm%2ByFnyEClrJNqqemHqMocWk5h%2BYJ5pgZhbpgDbAUeYEsK2zYdlQG6icpckyhAjlxoBb4oD%2BQ5uCOZgAGpiDsIAxVFZpmA2ABuYheJgsYpf6E5TqOpnquamBidp1a1sC9betgxAnIsiXJdVw6OU29UdteBw1UVBXThWAahnOHBzLQnBxLwfgcFopCoJwbjWNYbILEshK/DwpAEJoI1zOhIBxBo%2BicJIk3bbNnC8AoICHVt00jaQcCwEgzxvKuZAUBA9TAAoyiGJUQgIKgADuU0bWgLCJHQpLpL9IS0ADwNTTN4OQ/QMTfcwfaAyyKN0NEoSsCsvC42jPbCIDINnS9yBXMQ30XaQ1O1PgU28PwggiGI7BSDIgiKCo6h3aQuitAYRgoItlj6HgERXZAcyoIk1RXRwAC0VIGaYljWL8OyqwA6mItB6/rzzAXrrzoIYjjIJdK3LAMjrBLD/0U6DvBA8QTCJJwPCjeNp1C3NHDYKor1kjsqgABznqr56SDswDIJuEAfi66GDhAC3a1LOy4IQJAjmsXAzLwt1aDMcwIKcWAxLGpB7QdR0cCdpBI7wweXddm3bZXzdmIHM2dz3d19%2Bl0SpM4khAA%3D}{\codelogo}};
	\end{tikzpicture}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::unexpected|}
	\begin{itemize}
		\item Classe template \mintinline{cpp}|std::unexpected<E>| contenant une erreur
		\item \mintinline{cpp}|error()| retourne l'erreur
		\item Permet de construire un \mintinline{cpp}|std::expected| indiquant une erreur
	\end{itemize}

	\begin{minted}{cpp}
		expected<double, int> foo = unexpected(3);

		// Vrai
		if (!foo) { ... }

		// Vrai
		if (foo == unexpected(3)) { ... }
	\end{minted}

	\addproposal{P0323}{https://wg21.link/P0323R12}
	\addproposal{P2549}{https://wg21.link/P2549R1}
\end{frame}

\subsection*{Ranges}
\begin{frame}[fragile]
	\frametitle{Évolutions des ranges et vues}
	\begin{itemize}
		\item Ajout de \mintinline{cpp}|starts_with()| et \mintinline{cpp}|ends_with()| aux ranges
		\item Ajout de \mintinline{cpp}|contains()| aux ranges
	\end{itemize}

	\begin{minted}{cpp}
		auto foo = view::iota(0, 50);
		auto bar = view::iota(0, 30);

		if(ranges::starts_with(foo, bar)) { ... }
	\end{minted}

	\begin{itemize}
		\item Relâchement des contraintes sur les \textit{range adaptors} pour accepter les types \textit{move-only}
		\item Relâchement des contraintes sur \mintinline{cpp}|join_view| permettant le support de davantage de ranges

\note[item]{Avant seulement des ranges de \textit{glvalues ranges} (vues ou non) et des ranges de \textit{prvalues views}}
\note[item]{Maintenant aussi des ranges de \textit{prvalues non view ranges}}

		\item Suppression de la contrainte \textit{default constructible} pour les vues
		\item \mintinline{cpp}|std::ranges::to<>()| construit un conteneur depuis un \mintinline{cpp}|range|
	\end{itemize}

	\addproposal{P1206}{https://wg21.link/P1206R7}
	\addproposal{P2278}{https://wg21.link/P2278R4}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Nouveaux ranges et range adaptors}
	\begin{itemize}
		\item Amélioration de \mintinline{cpp}|std::views::split()|
		\item \mintinline{cpp}|std::views::lazy_split()|
		\item \mintinline{cpp}|std::views::zip()| et \mintinline{cpp}|std::views::zip_transform()|
	\end{itemize}

	\begin{minted}{cpp}
		auto x = vector{1, 2};
		auto y = list<string>{"Aa", "Bb", "Cc"};
		auto z = array{'A', 'B', 'C', 'D'};

		// 1 Aa A
		// 2 Bb B
		for(tuple<int&, string&, char&> e : views::zip(x, y, z)) {
		  cout << get<0>(e) << ' ' << get<1>(e) << ' ' << get<2>(e) << '\n';
		}
   	\end{minted}

	\begin{itemize}
		\item \mintinline{cpp}|std::views::adjacent()| et \mintinline{cpp}|std::views::adjacent_transform()|
	\end{itemize}

	\addproposal{P2210}{https://wg21.link/P2210R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Nouveaux ranges et range adaptors}
	\begin{itemize}
		\item \mintinline{cpp}|std::ranges::iota()|
		\item \mintinline{cpp}|std::ranges::shift_left()| et \mintinline{cpp}|std::ranges::shift_right()|

\note[item]{Équivalents à leur contreparties \mintinline{cpp}|std|}

		\item \mintinline{cpp}|std::views::join_with()| transforme un range de ranges en un range
	\end{itemize}

	\begin{minted}{cpp}
		vector<string> vs = {"the", "quick", "brown", "fox"};

		vs | join_with('-'); // the-quick-brown-fox
	\end{minted}

	\begin{itemize}
		\item \mintinline{cpp}|std::views::chunck()| coupe un range en blocs de N éléments
		\item \mintinline{cpp}|std::views::slide()| : \mintinline{cpp}|std::views::adjacent()| avec une taille  \textit{run-time}
		\item \mintinline{cpp}|std::views::chunck_by()| découpe un range en fonction d'un prédicat
	\end{itemize}

	\begin{minted}{cpp}
		vector v = {1, 2, 2, 3, 0, 4, 5, 2};

		v | chunk_by(less_equal{}));   // [[1, 2, 2, 3], [0, 4, 5], [2]]
	\end{minted}

	\addproposal{P2440}{https://wg21.link/P2440R1}
	\addproposal{P2328}{https://wg21.link/P2328R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Nouveaux ranges et range adaptors}
	\begin{itemize}
		\item \mintinline{cpp}|std::views::find_last()|
		\item \mintinline{cpp}|std::ranges::stride_view()| conserve un élément sur $n$
	\end{itemize}

	\begin{minted}{cpp}
		iota(1, 13) | stride(3);  // 1 4 7 10
	\end{minted}

	\begin{itemize}
		\item \mintinline{cpp}|std::ranges::fold()| équivalent range de \mintinline{cpp}|std::accumulate|
	\end{itemize}

	\begin{minted}{cpp}
		vector<double> v = {0.25, 0.75};

		auto r = ranges::fold(v, 1, plus()); // 2
	\end{minted}

	\begin{itemize}
		\item \mintinline{cpp}|std::views::cartesian_product| construit une vue sur le produit cartésien de plusieurs conteneurs
	\end{itemize}

	\addproposal{P1223}{https://wg21.link/P1223R5}
	\addproposal{P2322}{https://wg21.link/P2322R6}
	\addproposal{P2374}{https://wg21.link/P2374R4}
	\addproposal{P2540}{https://wg21.link/P2540R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Nouveaux ranges et range adaptors}
	\begin{itemize}
		\item \mintinline{cpp}|std::views::as_rvalue()|
		\item \mintinline{cpp}|std::views::repeat()| répète $n$ fois une valeur
	\end{itemize}

	\begin{minted}{cpp}
		views::repeat(17, 4);  // 17 17 17 17
	\end{minted}

	\begin{itemize}
		\item Correction de \mintinline{cpp}|std::ranges::istream_view()|
		\item \mintinline{cpp}|std::views::enumerate()| range index/valeur depuis un range de valeurs
		\begin{itemize}
			\item Manipulation d'un index dans un \textit{range-based for loop} sans gestion explicite
			\item Construction de \mintinline{cpp}|std::map| depuis un \mintinline{cpp}|std::vector| avec l'index pour clé
		\end{itemize}
	\end{itemize}

	\addproposal{P2446}{https://wg21.link/P2446R2}
\end{frame}

\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|borrowed_range|}
	\begin{itemize}
		\item Nouveau concept de range : \mintinline{cpp}|borrowed_range|
		\item Range dont les itérateurs sur celui-ci reste valide après sa destruction
		\item Des ranges inconditionnellement \textit{borrowed} : \mintinline{cpp}|ref_view|, \mintinline{cpp}|string_view|, \mintinline{cpp}|empty_view| et \mintinline{cpp}|iota_view|
		\item Des ranges conditionnellement \textit{borrowed}, selon la vue sous-jacente : \mintinline{cpp}|take_view|, \mintinline{cpp}|drop_view|, \ldots{}
	\end{itemize}

	\addproposal{P2017}{https://wg21.link/P2017R1}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Range adaptors définis par l'utilisateur}
	\begin{itemize}
		\item Classe de base \mintinline{cpp}|std::ranges::range_adaptor_closure<t>|
		\item Adaptateur de fonction \mintinline{cpp}|std::bind_back()|
	\end{itemize}

	\begin{minted}{cpp}
		bind_back(f, ys...)(xs...);

		// Equivalent a

		f(xs..., ys...);
	\end{minted}

	\addproposal{P2387}{https://wg21.link/P2387R3}
\end{frame}

\subsection*{Modules}
\begin{frame}[fragile]
	\frametitle{Modules}
	\begin{itemize}
		\item Module \mintinline{cpp}|std| importe tout le namespace \mintinline{cpp}|std| (C++ et \textit{wrappers} C)
		\item Module \mintinline{cpp}|std.compat| importe tout le namespace \mintinline{cpp}|std| et le namespace globale des \textit{wrappers} C
	\end{itemize}

	\addproposal{P2465}{https://wg21.link/P2465R3}
\end{frame}

\subsection*{Coroutines}
\begin{frame}[fragile]
	\frametitle{\mintinline[style=white]{cpp}|std::generator|}
	\begin{itemize}
		\item Générateur de coroutines synchrones
	\end{itemize}

	\addproposal{P2502}{https://wg21.link/P2502R2}
	\addproposal{P2787}{https://wg21.link/P2787R0}
\end{frame}
\end{document}